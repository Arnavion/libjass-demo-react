!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),a=n(18),l=n(2),u=n(8),s=n(19),c=r(s);n(17),n(16);var p=n(9);addEventListener("DOMContentLoaded",function(){return(0,a.render)(i["default"].createElement(l.Provider,{store:(0,u.createStore)(p.reducer,(0,u.applyMiddleware)(c["default"]))},i["default"].createElement(p.App,null)),document.querySelector("#root"))})},function(e,t){e.exports=React},function(e,t){e.exports=ReactRedux},function(e,t){"use strict";function n(e,t){var n=Object.create(null),r=!0,i=!1,a=void 0;try{for(var l,u=function(){var r=l.value,i=t[r],a=o++ +"-"+r,u=function(){var t=i.apply(void 0,arguments);return"function"==typeof t?function(n,r){return{type:a,payload:t(n,e(r()))}}:{type:a,payload:t}};u.type=a,n[r]=u},s=Object.keys(t)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)u()}catch(c){i=!0,a=c}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}function r(e,t){return function(){var n=arguments.length<=0||void 0===arguments[0]?e:arguments[0],r=arguments[1],o=r.type,i=r.payload,a=t[o];return"function"==typeof a?a(n,i):n}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeUniqueActions=n,t.createReducer=r;var o=0},function(e,t,n){var r,o;!function(n,i){var a=this;r=[],o=function(){return i(a)}.apply(t,r),!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";return function(e){function t(r){if(n[r])return n[r];var o=n[r]=Object.create(null);return e[r](o,t),o}var n=Object.create(null);return t(0)}([function(e,t){var n=t(23),r=t(23);e.debugMode=r.debugMode,e.verboseMode=r.verboseMode;var o=t(33),i=t(33);e.Set=i.Set;var a=t(30),l=t(30);e.Map=l.Map;var u=t(32),s=t(32);e.Promise=s.Promise,e.DeferredPromise=s.DeferredPromise;var c=t(37);e.webworker=c;var p=t(8);e.parts=p;var f=t(1);e.parser=f;var h=t(14);e.renderers=h;var d=t(24);e.ASS=d.ASS;var v=t(25);e.Attachment=v.Attachment,e.AttachmentType=v.AttachmentType;var y=t(26);e.Dialogue=y.Dialogue;var g=t(28);e.ScriptProperties=g.ScriptProperties;var b=t(29);e.Style=b.Style;var m=t(27);e.BorderStyle=m.BorderStyle,e.Format=m.Format,e.WrappingStyle=m.WrappingStyle,Object.defineProperties(e,{debugMode:{get:function(){return n.debugMode},set:n.setDebugMode},verboseMode:{get:function(){return n.verboseMode},set:n.setVerboseMode},Set:{get:function(){return o.Set},set:o.setImplementation},Map:{get:function(){return a.Map},set:a.setImplementation},Promise:{get:function(){return u.Promise},set:u.setImplementation}})},function(e,t){var n=t(3);e.parse=n.parse;var r=t(5);e.BrowserReadableStream=r.BrowserReadableStream,e.StringStream=r.StringStream,e.XhrStream=r.XhrStream;var o=t(4);e.StreamParser=o.StreamParser,e.SrtStreamParser=o.SrtStreamParser},function(e,t){function n(e){var t=e.indexOf(":");if(-1===t)return null;var n=e.substr(0,t),r=e.substr(t+1).replace(/^\s+/,"");return{name:n,value:r}}function r(e,t){var r=n(e);if(null===r)return null;var i=r.value.split(",");i.length>t.length&&(i[t.length-1]=i.slice(t.length-1).join(","));var a=new o.Map;return t.forEach(function(e,t){a.set(e,i[t])}),{type:r.name,template:a}}var o=t(30);e.parseLineIntoProperty=n,e.parseLineIntoTypedTemplate=r},function(e,t){function n(e,t){var n=new u(e,t);if(null===n.result||n.result.end!==e.length)throw i.debugMode&&console.error("Parse failed. %s %s %o",t,e,n.result),new Error("Parse failed.");return n.result.value}function r(e,t,n,r){u.prototype["parse_tag_"+e]=function(o){var i=this,a=new f(o);if(null===i.read(a,e))return o.pop(),null;var l=n.call(i,a);if(null!==l)a.value=new t(l.value);else{if(r)return o.pop(),null;a.value=new t(null)}return a}}var o=t(8),i=t(23),a=t(30),l=new a.Map;e.parse=n;var u=function(){function e(e,t){this.e=e,this.t=new f(null),this.r=l.get(t).call(this,this.t)}return Object.defineProperty(e.prototype,"result",{get:function(){return this.r},enumerable:!0,configurable:!0}),e.prototype.parse_dialogueParts=function(e){var t,r=new f(e);for(r.value=[];this.n();){var i=this.parse_enclosedTags(r);if(null!==i)(t=r.value).push.apply(t,i.value);else{var a=this.parse_newline(r)||this.parse_hardspace(r)||this.parse_text(r);if(null===a)return e.pop(),null;if(a.value instanceof o.Text&&r.value[r.value.length-1]instanceof o.Text){var l=r.value[r.value.length-1];r.value[r.value.length-1]=new o.Text(l.value+a.value.value)}else r.value.push(a.value)}}var u=!1;return r.value.forEach(function(e,t){e instanceof o.DrawingMode?u=0!==e.scale:e instanceof o.Text&&u&&(r.value[t]=new o.DrawingInstructions(n(e.value,"drawingInstructions")))}),r},e.prototype.parse_enclosedTags=function(e){var t=new f(e);if(t.value=[],null===this.read(t,"{"))return e.pop(),null;for(var n=this.i();this.n()&&"}"!==n;n=this.i()){var r=null;if(null!==this.read(t,"\\")&&(r=this.parse_tag_alpha(t)||this.parse_tag_iclip(t)||this.parse_tag_xbord(t)||this.parse_tag_ybord(t)||this.parse_tag_xshad(t)||this.parse_tag_yshad(t)||this.parse_tag_blur(t)||this.parse_tag_bord(t)||this.parse_tag_clip(t)||this.parse_tag_fade(t)||this.parse_tag_fscx(t)||this.parse_tag_fscy(t)||this.parse_tag_move(t)||this.parse_tag_shad(t)||this.parse_tag_fad(t)||this.parse_tag_fax(t)||this.parse_tag_fay(t)||this.parse_tag_frx(t)||this.parse_tag_fry(t)||this.parse_tag_frz(t)||this.parse_tag_fsp(t)||this.parse_tag_fsplus(t)||this.parse_tag_fsminus(t)||this.parse_tag_org(t)||this.parse_tag_pbo(t)||this.parse_tag_pos(t)||this.parse_tag_an(t)||this.parse_tag_be(t)||this.parse_tag_fn(t)||this.parse_tag_fr(t)||this.parse_tag_fs(t)||this.parse_tag_kf(t)||this.parse_tag_ko(t)||this.parse_tag_1a(t)||this.parse_tag_1c(t)||this.parse_tag_2a(t)||this.parse_tag_2c(t)||this.parse_tag_3a(t)||this.parse_tag_3c(t)||this.parse_tag_4a(t)||this.parse_tag_4c(t)||this.parse_tag_a(t)||this.parse_tag_b(t)||this.parse_tag_c(t)||this.parse_tag_i(t)||this.parse_tag_k(t)||this.parse_tag_K(t)||this.parse_tag_p(t)||this.parse_tag_q(t)||this.parse_tag_r(t)||this.parse_tag_s(t)||this.parse_tag_t(t)||this.parse_tag_u(t),null===r&&t.pop()),null===r&&(r=this.parse_comment(t)),null===r)return e.pop(),null;r.value instanceof o.Comment&&t.value[t.value.length-1]instanceof o.Comment?t.value[t.value.length-1]=new o.Comment(t.value[t.value.length-1].value+r.value.value):t.value.push(r.value)}return null===this.read(t,"}")?(e.pop(),null):t},e.prototype.parse_newline=function(e){var t=new f(e);return null===this.read(t,"\\N")?(e.pop(),null):(t.value=new o.NewLine,t)},e.prototype.parse_hardspace=function(e){var t=new f(e);return null===this.read(t,"\\h")?(e.pop(),null):(t.value=new o.Text("Â "),t)},e.prototype.parse_text=function(e){var t=this.i(),n=new f(e),r=new f(n,t);return n.value=new o.Text(r.value),n},e.prototype.parse_comment=function(e){var t=this.i(),n=new f(e),r=new f(n,t);return n.value=new o.Comment(r.value),n},e.prototype.parse_tag_a=function(e){var t=new f(e);if(null===this.read(t,"a"))return e.pop(),null;var n=this.i();switch(n){case"1":var r=this.i(2);switch(r){case"10":case"11":n=r}break;case"2":case"3":case"5":case"6":case"7":case"9":break;default:return e.pop(),null}var i=new f(t,n),a=null;switch(i.value){case"1":a=1;break;case"2":a=2;break;case"3":a=3;break;case"5":a=7;break;case"6":a=8;break;case"7":a=9;break;case"9":a=4;break;case"10":a=5;break;case"11":a=6}return t.value=new o.Alignment(a),t},e.prototype.parse_tag_alpha=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_an=function(e){var t=new f(e);if(null===this.read(t,"an"))return e.pop(),null;var n=this.i();if("1">n||n>"9")return e.pop(),null;var r=new f(t,n);return t.value=new o.Alignment(parseInt(r.value)),t},e.prototype.parse_tag_b=function(e){var t=new f(e);if(null===this.read(t,"b"))return e.pop(),null;var n=null,r=this.i();return r>="1"&&"9">=r&&(r=this.i(3),"00"===r.substr(1)&&(n=new f(t,r),n.value=parseInt(n.value))),null===n&&(n=this.parse_enableDisable(t)),null!==n?t.value=new o.Bold(n.value):t.value=new o.Bold(null),t},e.prototype.parse_tag_be=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_blur=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_bord=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_c=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_clip=function(e){return this.o("clip",e)},e.prototype.parse_tag_fad=function(e){var t=new f(e);if(null===this.read(t,"fad"))return e.pop(),null;if(null===this.read(t,"("))return e.pop(),null;var n=this.parse_decimal(t);if(null===n)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var r=this.parse_decimal(t);return null===r?(e.pop(),null):null===this.read(t,")")?(e.pop(),null):(t.value=new o.Fade(n.value/1e3,r.value/1e3),t)},e.prototype.parse_tag_fade=function(e){var t=new f(e);if(null===this.read(t,"fade"))return e.pop(),null;if(null===this.read(t,"("))return e.pop(),null;var n=this.parse_decimal(t);if(null===n)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var r=this.parse_decimal(t);if(null===r)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var i=this.parse_decimal(t);if(null===i)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var a=this.parse_decimal(t);if(null===a)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var l=this.parse_decimal(t);if(null===l)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var u=this.parse_decimal(t);if(null===u)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var s=this.parse_decimal(t);return null===s?(e.pop(),null):null===this.read(t,")")?(e.pop(),null):(t.value=new o.ComplexFade(1-n.value/255,1-r.value/255,1-i.value/255,a.value/1e3,l.value/1e3,u.value/1e3,s.value/1e3),t)},e.prototype.parse_tag_fax=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_fay=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_fn=function(e){var t=new f(e);if(null===this.read(t,"fn"))return e.pop(),null;for(var n=new f(t,""),r=this.i();this.n()&&"\\"!==r&&"}"!==r;r=this.i())n.value+=r;return n.value.length>0?t.value=new o.FontName(n.value):t.value=new o.FontName(null),t},e.prototype.parse_tag_fr=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_frx=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_fry=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_frz=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_fs=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_fsplus=function(e){var t=new f(e);if(null===this.read(t,"fs+"))return e.pop(),null;var n=this.parse_decimal(t);return null===n?(e.pop(),null):(t.value=new o.FontSizePlus(n.value),t)},e.prototype.parse_tag_fsminus=function(e){var t=new f(e);if(null===this.read(t,"fs-"))return e.pop(),null;var n=this.parse_decimal(t);return null===n?(e.pop(),null):(t.value=new o.FontSizeMinus(n.value),t)},e.prototype.parse_tag_fscx=function(e){var t=new f(e);if(null===this.read(t,"fscx"))return e.pop(),null;var n=this.parse_decimal(t);return null!==n?t.value=new o.FontScaleX(n.value/100):t.value=new o.FontScaleX(null),t},e.prototype.parse_tag_fscy=function(e){var t=new f(e);if(null===this.read(t,"fscy"))return e.pop(),null;var n=this.parse_decimal(t);return null!==n?t.value=new o.FontScaleY(n.value/100):t.value=new o.FontScaleY(null),t},e.prototype.parse_tag_fsp=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_i=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_iclip=function(e){return this.o("iclip",e)},e.prototype.parse_tag_k=function(e){var t=new f(e);if(null===this.read(t,"k"))return e.pop(),null;var n=this.parse_decimal(t);return null===n?(e.pop(),null):(t.value=new o.ColorKaraoke(n.value/100),t)},e.prototype.parse_tag_K=function(e){var t=new f(e);if(null===this.read(t,"K"))return e.pop(),null;var n=this.parse_decimal(t);return null===n?(e.pop(),null):(t.value=new o.SweepingColorKaraoke(n.value/100),t)},e.prototype.parse_tag_kf=function(e){var t=new f(e);if(null===this.read(t,"kf"))return e.pop(),null;var n=this.parse_decimal(t);return null===n?(e.pop(),null):(t.value=new o.SweepingColorKaraoke(n.value/100),t)},e.prototype.parse_tag_ko=function(e){var t=new f(e);if(null===this.read(t,"ko"))return e.pop(),null;var n=this.parse_decimal(t);return null===n?(e.pop(),null):(t.value=new o.OutlineKaraoke(n.value/100),t)},e.prototype.parse_tag_move=function(e){var t=new f(e);if(null===this.read(t,"move"))return e.pop(),null;if(null===this.read(t,"("))return e.pop(),null;var n=this.parse_decimal(t);if(null===n)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var r=this.parse_decimal(t);if(null===r)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var i=this.parse_decimal(t);if(null===i)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var a=this.parse_decimal(t);if(null===a)return e.pop(),null;var l=null,u=null;if(null!==this.read(t,",")){if(l=this.parse_decimal(t),null===l)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;if(u=this.parse_decimal(t),null===u)return e.pop(),null}return null===this.read(t,")")?(e.pop(),null):(t.value=new o.Move(n.value,r.value,i.value,a.value,null!==l?l.value/1e3:null,null!==u?u.value/1e3:null),t)},e.prototype.parse_tag_org=function(e){var t=new f(e);if(null===this.read(t,"org"))return e.pop(),null;if(null===this.read(t,"("))return e.pop(),null;var n=this.parse_decimal(t);if(null===n)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var r=this.parse_decimal(t);return null===r?(e.pop(),null):null===this.read(t,")")?(e.pop(),null):(t.value=new o.RotationOrigin(n.value,r.value),t)},e.prototype.parse_tag_p=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_pbo=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_pos=function(e){var t=new f(e);if(null===this.read(t,"pos"))return e.pop(),null;if(null===this.read(t,"("))return e.pop(),null;var n=this.parse_decimal(t);if(null===n)return e.pop(),null;if(null===this.read(t,","))return e.pop(),null;var r=this.parse_decimal(t);return null===r?(e.pop(),null):null===this.read(t,")")?(e.pop(),null):(t.value=new o.Position(n.value,r.value),t)},e.prototype.parse_tag_q=function(e){var t=new f(e);if(null===this.read(t,"q"))return e.pop(),null;var n=this.i();if("0">n||n>"3")return e.pop(),null;var r=new f(t,n);return t.value=new o.WrappingStyle(parseInt(r.value)),t},e.prototype.parse_tag_r=function(e){var t=new f(e);if(null===this.read(t,"r"))return e.pop(),null;for(var n=new f(t,""),r=this.i();this.n()&&"\\"!==r&&"}"!==r;r=this.i())n.value+=r;return n.value.length>0?t.value=new o.Reset(n.value):t.value=new o.Reset(null),t},e.prototype.parse_tag_s=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_shad=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_t=function(e){var t=new f(e);if(null===this.read(t,"t"))return e.pop(),null;if(null===this.read(t,"("))return e.pop(),null;var n=null,r=null,i=null,a=this.parse_decimal(t);if(null!==a){if(null===this.read(t,","))return e.pop(),null;var l=this.parse_decimal(t);if(null!==l){if(n=a,r=l,null===this.read(t,","))return e.pop(),null;var u=this.parse_decimal(t);if(null!==u&&(i=u,null===this.read(t,",")))return e.pop(),null}else if(i=a,null===this.read(t,","))return e.pop(),null}for(var s=[],c=this.i();this.n()&&")"!==c&&"}"!==c;c=this.i()){var p=null;if(null!==this.read(t,"\\")&&(p=this.parse_tag_alpha(t)||this.parse_tag_iclip(t)||this.parse_tag_xbord(t)||this.parse_tag_ybord(t)||this.parse_tag_xshad(t)||this.parse_tag_yshad(t)||this.parse_tag_blur(t)||this.parse_tag_bord(t)||this.parse_tag_clip(t)||this.parse_tag_fscx(t)||this.parse_tag_fscy(t)||this.parse_tag_shad(t)||this.parse_tag_fax(t)||this.parse_tag_fay(t)||this.parse_tag_frx(t)||this.parse_tag_fry(t)||this.parse_tag_frz(t)||this.parse_tag_fsp(t)||this.parse_tag_fsplus(t)||this.parse_tag_fsminus(t)||this.parse_tag_be(t)||this.parse_tag_fr(t)||this.parse_tag_fs(t)||this.parse_tag_1a(t)||this.parse_tag_1c(t)||this.parse_tag_2a(t)||this.parse_tag_2c(t)||this.parse_tag_3a(t)||this.parse_tag_3c(t)||this.parse_tag_4a(t)||this.parse_tag_4c(t)||this.parse_tag_c(t),null===p&&t.pop()),null===p&&(p=this.parse_comment(t)),null===p)return e.pop(),null;p.value instanceof o.Comment&&s[s.length-1]instanceof o.Comment?s[s.length-1]=new o.Comment(s[s.length-1].value+p.value.value):s.push(p.value)}return this.read(t,")"),t.value=new o.Transform(null!==n?n.value/1e3:null,null!==r?r.value/1e3:null,null!==i?i.value/1e3:null,s),t},e.prototype.parse_tag_u=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_xbord=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_xshad=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_ybord=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_yshad=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_1a=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_1c=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_2a=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_2c=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_3a=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_3c=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_4a=function(){throw new Error("Method not implemented.")},e.prototype.parse_tag_4c=function(){throw new Error("Method not implemented.")},e.prototype.parse_drawingInstructions=function(e){var t=new f(e),n=null,r=[];for(t.value=[];this.n();){for(;null!==this.read(t," "););if(!this.n())break;if(null!==n){var i=this.parse_decimal(t);if(null!==i){r.push(i),"m"===n&&2===r.length?(t.value.push(new o.drawing.MoveInstruction(r[0].value,r[1].value)),r.splice(0,r.length)):"l"===n&&2===r.length?(t.value.push(new o.drawing.LineInstruction(r[0].value,r[1].value)),r.splice(0,r.length)):"b"===n&&6===r.length&&(t.value.push(new o.drawing.CubicBezierCurveInstruction(r[0].value,r[1].value,r[2].value,r[3].value,r[4].value,r[5].value)),r.splice(0,r.length));continue}}var a=this.parse_text(t);if(null===a)break;var l=a.value.value;switch(l){case"m":case"l":case"b":n=l,r.splice(0,r.length)}}for(;null!==this.read(t," "););return t},e.prototype.parse_decimalInt32=function(e){for(var t=new f(e),n=null!==this.read(t,"-"),r=new f(t,""),o=this.i();this.n()&&o>="0"&&"9">=o;o=this.i())r.value+=o;if(0===r.value.length)return e.pop(),null;var i=parseInt(r.value);return i>=4294967295?i=4294967295:n&&(i=-i),t.value=i,t},e.prototype.parse_hexInt32=function(e){for(var t=new f(e),n=null!==this.read(t,"-"),r=new f(t,""),o=this.i();this.n()&&(o>="0"&&"9">=o||o>="a"&&"f">=o||o>="A"&&"F">=o);o=this.i())r.value+=o;if(0===r.value.length)return e.pop(),null;var i=parseInt(r.value,16);return i>=4294967295?i=4294967295:n&&(i=-i),t.value=i,t},e.prototype.parse_decimalOrHexInt32=function(e){var t=new f(e),n=null!==this.read(t,"&H")||null!==this.read(t,"&h")?this.parse_hexInt32(t):this.parse_decimalInt32(t);return null===n?(e.pop(),null):(t.value=n.value,t)},e.prototype.parse_decimal=function(e){var t=new f(e),n=null!==this.read(t,"-"),r=this.parse_unsignedDecimal(t);return null===r?(e.pop(),null):(t.value=r.value,n&&(t.value=-t.value),t)},e.prototype.parse_unsignedDecimal=function(e){for(var t=new f(e),n=new f(t,""),r=null,o=this.i();this.n()&&o>="0"&&"9">=o;o=this.i())n.value+=o;if(0===n.value.length)return e.pop(),null;if(null!==this.read(t,".")){r=new f(t,"");for(var o=this.i();this.n()&&o>="0"&&"9">=o;o=this.i())r.value+=o;if(0===r.value.length)return e.pop(),null}return t.value=parseFloat(n.value+(null!==r?"."+r.value:"")),t},e.prototype.parse_enableDisable=function(e){var t=this.i();if("0"===t||"1"===t){var n=new f(e,t);return n.value="1"===n.value,n}return null},e.prototype.parse_color=function(e){for(var t=new f(e);null!==this.read(t,"&")||null!==this.read(t,"H"););var n=this.parse_hexInt32(t);if(null===n)return e.pop(),null;var r=n.value;for(t.value=new o.Color(255&r,r>>8&255,r>>16&255);null!==this.read(t,"&")||null!==this.read(t,"H"););return t},e.prototype.parse_alpha=function(e){for(var t=new f(e);null!==this.read(t,"&")||null!==this.read(t,"H"););var n=this.parse_hexInt32(t);if(null===n)return e.pop(),null;var r=n.value;for(t.value=1-(255&r)/255;null!==this.read(t,"&")||null!==this.read(t,"H"););return t},e.prototype.parse_colorWithAlpha=function(e){var t=new f(e),n=this.parse_decimalOrHexInt32(t);if(null===n)return e.pop(),null;var r=n.value;return t.value=new o.Color(255&r,r>>8&255,r>>16&255,1-(r>>24&255)/255),t},e.prototype.read=function(e,t){return this.i(t.length)!==t?null:new f(e,t)},e.prototype.i=function(e){return void 0===e&&(e=1),1===e?this.e[this.t.end]:this.e.substr(this.t.end,e)},e.prototype.n=function(){return this.t.end<this.e.length},e.prototype.o=function(e,t){var r=new f(t);if(null===this.read(r,e))return t.pop(),null;if(null===this.read(r,"("))return t.pop(),null;var i=null,a=null,l=null,u=null,s=null,c=null,p=this.parse_decimal(r);if(null!==p){if(null===this.read(r,","))return t.pop(),null;var h=this.parse_decimal(r);null!==h?(i=p,l=h):s=p}if(null!==i&&null!==l){if(null===this.read(r,","))return t.pop(),null;if(a=this.parse_decimal(r),null===this.read(r,","))return t.pop(),null;u=this.parse_decimal(r),r.value=new o.RectangularClip(i.value,l.value,a.value,u.value,"clip"===e)}else{c=new f(r,"");for(var d=this.i();this.n()&&")"!==d&&"}"!==d;d=this.i())c.value+=d;r.value=new o.VectorClip(null!==s?s.value:1,n(c.value,"drawingInstructions"),"clip"===e)}return null===this.read(r,")")?(t.pop(),null):r},e}();r("alpha",o.Alpha,u.prototype.parse_alpha,!1),r("be",o.Blur,u.prototype.parse_decimal,!1),r("blur",o.GaussianBlur,u.prototype.parse_decimal,!1),r("bord",o.Border,u.prototype.parse_decimal,!1),r("c",o.PrimaryColor,u.prototype.parse_color,!1),r("fax",o.SkewX,u.prototype.parse_decimal,!1),r("fay",o.SkewY,u.prototype.parse_decimal,!1),r("fr",o.RotateZ,u.prototype.parse_decimal,!1),r("frx",o.RotateX,u.prototype.parse_decimal,!1),r("fry",o.RotateY,u.prototype.parse_decimal,!1),r("frz",o.RotateZ,u.prototype.parse_decimal,!1),r("fs",o.FontSize,u.prototype.parse_decimal,!1),r("fsp",o.LetterSpacing,u.prototype.parse_decimal,!1),r("i",o.Italic,u.prototype.parse_enableDisable,!1),r("p",o.DrawingMode,u.prototype.parse_decimal,!0),r("pbo",o.DrawingBaselineOffset,u.prototype.parse_decimal,!0),r("s",o.StrikeThrough,u.prototype.parse_enableDisable,!1),r("shad",o.Shadow,u.prototype.parse_decimal,!1),r("u",o.Underline,u.prototype.parse_enableDisable,!1),r("xbord",o.BorderX,u.prototype.parse_decimal,!1),r("xshad",o.ShadowX,u.prototype.parse_decimal,!1),r("ybord",o.BorderY,u.prototype.parse_decimal,!1),r("yshad",o.ShadowY,u.prototype.parse_decimal,!1),r("1a",o.PrimaryAlpha,u.prototype.parse_alpha,!1),r("1c",o.PrimaryColor,u.prototype.parse_color,!1),r("2a",o.SecondaryAlpha,u.prototype.parse_alpha,!1),r("2c",o.SecondaryColor,u.prototype.parse_color,!1),r("3a",o.OutlineAlpha,u.prototype.parse_alpha,!1),r("3c",o.OutlineColor,u.prototype.parse_color,!1),r("4a",o.ShadowAlpha,u.prototype.parse_alpha,!1),r("4c",o.ShadowColor,u.prototype.parse_color,!1);for(var s=0,c=Object.keys(u.prototype);s<c.length;s++){var p=c[s];0===p.indexOf("parse_")&&"function"==typeof u.prototype[p]&&l.set(p.substr("parse_".length),u.prototype[p])}var f=function(){function e(e,t){void 0===t&&(t=null),this.a=e,this.l=[],null!==e&&e.children.push(this),this.s=null!==e?e.end:0,this.u=this.s,this.value=t}return Object.defineProperty(e.prototype,"start",{get:function(){return this.s},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.u},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.l},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.p},set:function(e){this.p=e,null!==this.p&&this.p.constructor===String&&0===this.l.length&&this.c(this.s+this.p.length)},enumerable:!0,configurable:!0}),e.prototype.pop=function(){this.l.splice(this.l.length-1,1),this.l.length>0?this.c(this.l[this.l.length-1].end):this.c(this.start)},e.prototype.c=function(e){this.u=e,null!==this.a&&this.a.end!==this.u&&this.a.c(this.u)},e}(),h=t(32),d=t(36),v=t(38);v.registerWorkerCommand(d.WorkerCommands.Parse,function(e){return new h.Promise(function(t){t(n(e.input,e.rule))})})},function(e,t){function n(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n)-33;if(0>r||r>63)throw new Error("Out-of-range character code "+r+" at index "+n+" in string "+e);t+=26>r?String.fromCharCode("A".charCodeAt(0)+r):52>r?String.fromCharCode("a".charCodeAt(0)+r-26):62>r?String.fromCharCode("0".charCodeAt(0)+r-52):62===r?"+":"/"}return t}var r,o=t(23),i=t(24),a=t(29),l=t(26),u=t(25),s=t(30),c=t(32),p=t(2);!function(e){e[e.ScriptInfo=0]="ScriptInfo",e[e.Styles=1]="Styles",e[e.Events=2]="Events",e[e.Fonts=3]="Fonts",e[e.Graphics=4]="Graphics",e[e.Other=5]="Other",e[e.EOF=6]="EOF"}(r||(r={}));var f=function(){function e(e){var t=this;this.h=e,this.f=new i.ASS,this.d=new c.DeferredPromise,this._=new c.DeferredPromise,this.g=!0,this.v=r.ScriptInfo,this.y=null,this.h.nextLine().then(function(e){return t.m(e)},function(e){t.d.reject(e),t._.reject(e)})}return Object.defineProperty(e.prototype,"minimalASS",{get:function(){return this.d.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ass",{get:function(){return this._.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSection",{get:function(){return this.v},set:function(e){if(null!==this.y&&(this.f.addAttachment(this.y),this.y=null),this.v===r.ScriptInfo&&e!==r.ScriptInfo&&this.d.resolve(this.f),e===r.EOF){var t=this.f.properties;void 0===t.resolutionX||void 0===t.resolutionY?(this.d.reject("Malformed ASS script."),this._.reject("Malformed ASS script.")):(this.d.resolve(this.f),this._.resolve(this.f))}this.v=e},enumerable:!0,configurable:!0}),e.prototype.m=function(e){var t=this;if(null===e)return void(this.currentSection=r.EOF);if("\r"===e[e.length-1]&&(e=e.substr(0,e.length-1)),65279===e.charCodeAt(0)&&this.g&&(e=e.substr(1)),this.g=!1,""===e);else if(";"===e[0]&&null===this.y);else if("[Script Info]"===e)this.currentSection=r.ScriptInfo;else if("[V4+ Styles]"===e||"[V4 Styles]"===e)this.currentSection=r.Styles;else if("[Events]"===e)this.currentSection=r.Events;else if("[Fonts]"===e)this.currentSection=r.Fonts;else if("[Graphics]"===e)this.currentSection=r.Graphics;else switch(null===this.y&&"["===e[0]&&"]"===e[e.length-1]&&(this.currentSection=r.Other),this.currentSection){case r.ScriptInfo:var i=p.parseLineIntoProperty(e);if(null!==i)switch(i.name){case"PlayResX":this.f.properties.resolutionX=parseInt(i.value);break;case"PlayResY":this.f.properties.resolutionY=parseInt(i.value);break;case"WrapStyle":this.f.properties.wrappingStyle=parseInt(i.value);break;case"ScaledBorderAndShadow":this.f.properties.scaleBorderAndShadow="yes"===i.value}break;case r.Styles:if(null===this.f.stylesFormatSpecifier){var a=p.parseLineIntoProperty(e);null!==a&&"Format"===a.name&&(this.f.stylesFormatSpecifier=a.value.split(",").map(function(e){return e.trim()}))}else try{this.f.addStyle(e)}catch(t){o.debugMode&&console.error("Could not parse style from line "+e+" - "+(t.stack||t))}break;case r.Events:if(null===this.f.dialoguesFormatSpecifier){var l=p.parseLineIntoProperty(e);null!==l&&"Format"===l.name&&(this.f.dialoguesFormatSpecifier=l.value.split(",").map(function(e){return e.trim()}))}else try{this.f.addEvent(e)}catch(t){o.debugMode&&console.error("Could not parse event from line "+e+" - "+(t.stack||t))}break;case r.Fonts:case r.Graphics:var s=this.currentSection===r.Fonts?/^fontname:(.+)/:/^filename:(.+)/,c=s.exec(e);if(null!==c)null!==this.y&&(this.f.addAttachment(this.y),this.y=null),this.y=new u.Attachment(c[1].trim(),this.currentSection===r.Fonts?u.AttachmentType.Font:u.AttachmentType.Graphic);else if(null!==this.y)try{this.y.contents+=n(e)}catch(e){o.debugMode&&console.error("Encountered error while reading font "+this.y.filename+": %o",e),this.y=null}break;case r.Other:break;default:throw new Error("Unhandled state "+this.currentSection)}this.h.nextLine().then(function(e){return t.m(e)},function(e){t.d.reject(e),t._.reject(e)})},e}();e.StreamParser=f;var h=function(){function e(e){var t=this;this.h=e,this.f=new i.ASS,this._=new c.DeferredPromise,this.g=!0,this.b=null,this.w=null,this.S=null,this.O=null,this.h.nextLine().then(function(e){return t.m(e)},function(e){t._.reject(e)}),this.f.properties.resolutionX=1280,this.f.properties.resolutionY=720,this.f.properties.wrappingStyle=1,this.f.properties.scaleBorderAndShadow=!0;var n=new a.Style(new s.Map([["Name","Default"],["FontSize","36"]]));this.f.styles.set(n.name,n)}return Object.defineProperty(e.prototype,"ass",{get:function(){return this._.promise},enumerable:!0,configurable:!0}),e.prototype.m=function(e){var t=this;if(null===e)return null!==this.b&&null!==this.w&&null!==this.S&&null!==this.O&&this.f.dialogues.push(new l.Dialogue(new s.Map([["Style","Default"],["Start",this.w],["End",this.S],["Text",this.O]]),this.f)),void this._.resolve(this.f);if("\r"===e[e.length-1]&&(e=e.substr(0,e.length-1)),65279===e.charCodeAt(0)&&this.g&&(e=e.substr(1)),this.g=!1,""===e)null!==this.b&&null!==this.w&&null!==this.S&&null!==this.O&&this.f.dialogues.push(new l.Dialogue(new s.Map([["Style","Default"],["Start",this.w],["End",this.S],["Text",this.O]]),this.f)),this.b=this.w=this.S=this.O=null;else if(null===this.b)/^\d+$/.test(e)&&(this.b=e);else if(null===this.w&&null===this.S){var n=/^(\d\d:\d\d:\d\d,\d\d\d) --> (\d\d:\d\d:\d\d,\d\d\d)/.exec(e);null!==n&&(this.w=n[1].replace(",","."),this.S=n[2].replace(",","."))}else e=e.replace(/<b>/g,"{\\b1}").replace(/\{b\}/g,"{\\b1}").replace(/<\/b>/g,"{\\b0}").replace(/\{\/b\}/g,"{\\b0}").replace(/<i>/g,"{\\i1}").replace(/\{i\}/g,"{\\i1}").replace(/<\/i>/g,"{\\i0}").replace(/\{\/i\}/g,"{\\i0}").replace(/<u>/g,"{\\u1}").replace(/\{u\}/g,"{\\u1}").replace(/<\/u>/g,"{\\u0}").replace(/\{\/u\}/g,"{\\u0}").replace(/<font color="#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})">/g,function(e,t,n,r){return"{c&H"+r+n+t+"&}"}).replace(/<\/font>/g,"{\\c}"),null!==this.O?this.O+="\\N"+e:this.O=e;this.h.nextLine().then(function(e){return t.m(e)},function(e){t._.reject(e)})},e}();e.SrtStreamParser=h},function(t,n){var r=n(32),o=function(){function e(e){this.P=e,this.C=0}return e.prototype.nextLine=function(){var e=null;if(this.C<this.P.length){var t=this.P.indexOf("\n",this.C);-1!==t?(e=r.Promise.resolve(this.P.substring(this.C,t)),this.C=t+1):(e=r.Promise.resolve(this.P.substr(this.C)),this.C=this.P.length)}else e=r.Promise.resolve(null);return e},e}();t.StringStream=o;var i=function(){function e(e){var t=this;this.k=e,this.C=0,this.x=null,this.j=null,e.addEventListener("progress",function(){return t.A()},!1),e.addEventListener("load",function(){return t.T()},!1),e.addEventListener("error",function(e){return t.D(e)},!1)}return e.prototype.nextLine=function(){if(null!==this.x)throw new Error("XhrStream only supports one pending unfulfilled read at a time.");var e=this.x=new r.DeferredPromise;return this.F(),e.promise},e.prototype.A=function(){null!==this.x&&this.k.readyState!==XMLHttpRequest.DONE&&this.F()},e.prototype.T=function(){null!==this.x&&this.F()},e.prototype.D=function(e){this.j=e,null!==this.x&&this.F()},e.prototype.F=function(){if(null!==this.j)return void this.x.reject(this.j);
var e=this.k.responseText,t=e.indexOf("\n",this.C);-1!==t?(this.x.resolve(e.substring(this.C,t)),this.C=t+1,this.x=null):this.k.readyState===XMLHttpRequest.DONE&&(null!==this.j?this.x.reject(this.j):this.C<e.length?(this.x.resolve(e.substr(this.C)),this.C=e.length):this.x.resolve(null),this.x=null)},e}();t.XhrStream=i;var a=function(){function t(t,n){this.M="",this.x=null,this.R=t.getReader(),this.N=new e.TextDecoder(n,{ignoreBOM:!0})}return t.prototype.nextLine=function(){if(null!==this.x)throw new Error("BrowserReadableStream only supports one pending unfulfilled read at a time.");var e=this.x=new r.DeferredPromise;return this.F(),e.promise},t.prototype.F=function(){var e=this,t=this.M.indexOf("\n");-1!==t?(this.x.resolve(this.M.substr(0,t)),this.M=this.M.substr(t+1),this.x=null):this.R.read().then(function(t){var n=t.value,r=t.done;r?(0===e.M.length?e.x.resolve(null):(e.x.resolve(e.M),e.M=""),e.x=null):(e.M+=e.N.decode(n,{stream:!0}),e.F())})},t}();t.BrowserReadableStream=a},function(e,t){function n(e){for(var t=atob(e.contents),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);for(var o={dataView:new DataView(n.buffer),position:0},i=c.read(o),a=null,r=0;r<i.numTables;r++){var l=p.read(o);if(l.c1+l.c2+l.c3+l.c4==="name"){a=l;break}}o.position=a.offset;for(var s=f.read(o),d=new u.Set,r=0;r<s.count;r++){var v=h.read(o);switch(v.nameId){case 1:case 4:case 6:var y=a.offset+s.stringOffset+v.offset,g=n.subarray(y,y+v.length);switch(v.platformId){case 1:for(var b="",m=0;m<g.length;m++)b+=String.fromCharCode(g[m]);d.add(b);break;case 3:for(var w="",m=0;m<g.length;m+=2)w+=String.fromCharCode((g[m]<<8)+g[m+1]);d.add(w)}}}return d}function r(e){var t=e.W;return e.read=function(n){for(var r=new e,o=0;o<t.length;o++){var a=t[o],l=void 0;switch(a.type){case i.Char:l=String.fromCharCode(n.dataView.getInt8(n.position)),n.position+=1;break;case i.Uint16:l=n.dataView.getUint16(n.position),n.position+=2;break;case i.Uint32:l=n.dataView.getUint32(n.position),n.position+=4}r[a.field]=l}return r},e}function o(e){var t=s.get(e);return void 0===t&&(t=function(t,n){var r=t.constructor;void 0===r.W&&(r.W=[]),r.W.push({type:e,field:n})},s.set(e,t)),t}var i,a=t(34).L,l=t(30),u=t(33);!function(e){e[e.Char=0]="Char",e[e.Uint16=1]="Uint16",e[e.Uint32=2]="Uint32"}(i||(i={}));var s=new l.Map,c=function(){function e(){}return a([o(i.Uint16)],e.prototype,"majorVersion",void 0),a([o(i.Uint16)],e.prototype,"minorVersion",void 0),a([o(i.Uint16)],e.prototype,"numTables",void 0),a([o(i.Uint16)],e.prototype,"searchRange",void 0),a([o(i.Uint16)],e.prototype,"entrySelector",void 0),a([o(i.Uint16)],e.prototype,"rangeShift",void 0),e=a([r],e)}(),p=function(){function e(){}return a([o(i.Char)],e.prototype,"c1",void 0),a([o(i.Char)],e.prototype,"c2",void 0),a([o(i.Char)],e.prototype,"c3",void 0),a([o(i.Char)],e.prototype,"c4",void 0),a([o(i.Uint32)],e.prototype,"checksum",void 0),a([o(i.Uint32)],e.prototype,"offset",void 0),a([o(i.Uint32)],e.prototype,"length",void 0),e=a([r],e)}(),f=function(){function e(){}return a([o(i.Uint16)],e.prototype,"formatSelector",void 0),a([o(i.Uint16)],e.prototype,"count",void 0),a([o(i.Uint16)],e.prototype,"stringOffset",void 0),e=a([r],e)}(),h=function(){function e(){}return a([o(i.Uint16)],e.prototype,"platformId",void 0),a([o(i.Uint16)],e.prototype,"encodingId",void 0),a([o(i.Uint16)],e.prototype,"languageId",void 0),a([o(i.Uint16)],e.prototype,"nameId",void 0),a([o(i.Uint16)],e.prototype,"length",void 0),a([o(i.Uint16)],e.prototype,"offset",void 0),e=a([r],e)}();e.getTtfNames=n},function(e){var t=function(){function e(e,t){this.I=e,this.X=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.I},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.X},enumerable:!0,configurable:!0}),e}();e.MoveInstruction=t;var n=function(){function e(e,t){this.I=e,this.X=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.I},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.X},enumerable:!0,configurable:!0}),e}();e.LineInstruction=n;var r=function(){function e(e,t,n,r,o,i){this.Y=e,this.V=t,this.B=n,this.z=r,this.G=o,this.q=i}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.Y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.V},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.B},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.z},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x3",{get:function(){return this.G},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y3",{get:function(){return this.q},enumerable:!0,configurable:!0}),e}();e.CubicBezierCurveInstruction=r},function(e,t){var n=t(7);e.drawing=n;var r=function(){function e(e,t,n,r){void 0===r&&(r=1),this.U=e,this.H=t,this.K=n,this.Z=r}return Object.defineProperty(e.prototype,"red",{get:function(){return this.U},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.H},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.K},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.Z},enumerable:!0,configurable:!0}),e.prototype.withAlpha=function(t){return null!==t?new e(this.U,this.H,this.K,t):this},e.prototype.toString=function(){return"rgba("+this.U+", "+this.H+", "+this.K+", "+this.Z.toFixed(3)+")"},e.prototype.interpolate=function(t,n){return new e(this.U+n*(t.red-this.U),this.H+n*(t.green-this.H),this.K+n*(t.blue-this.K),this.Z+n*(t.alpha-this.Z))},e}();e.Color=r;var o=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Comment=o;var i=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Text { value: "+this.p.replace(/\u00A0/g,"\\h")+" }"},e}();e.Text=i;var a=function(){function e(){}return e}();e.NewLine=a;var l=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Italic=l;var u=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Bold=u;var s=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Underline=s;var c=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.StrikeThrough=c;var p=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Border=p;var f=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.BorderX=f;var h=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.BorderY=h;var d=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Shadow=d;var v=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.ShadowX=v;var y=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.ShadowY=y;var g=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Blur=g;var b=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.GaussianBlur=b;var m=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.FontName=m;var w=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.FontSize=w;var S=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.FontSizePlus=S;var C=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.FontSizeMinus=C;var _=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.FontScaleX=_;var E=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.FontScaleY=E;var O=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.LetterSpacing=O;var P=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.RotateX=P;var j=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.RotateY=j;var x=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.RotateZ=x;var M=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.SkewX=M;var A=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.SkewY=A;var D=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.PrimaryColor=D;var F=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.SecondaryColor=F;var k=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.OutlineColor=k;var R=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.ShadowColor=R;var T=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Alpha=T;var L=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.PrimaryAlpha=L;var N=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.SecondaryAlpha=N;var V=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.OutlineAlpha=V;var I=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.ShadowAlpha=I;var U=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Alignment=U;var W=function(){function e(e){this.J=e}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.J},enumerable:!0,configurable:!0}),e}();e.ColorKaraoke=W;var B=function(){function e(e){this.J=e}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.J},enumerable:!0,configurable:!0}),e}();e.SweepingColorKaraoke=B;var X=function(){function e(e){this.J=e}return Object.defineProperty(e.prototype,"duration",{get:function(){return this.J},enumerable:!0,configurable:!0}),e}();e.OutlineKaraoke=X;var Y=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.WrappingStyle=Y;var z=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.Reset=z;var G=function(){function e(e,t){this.I=e,this.X=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.I},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.X},enumerable:!0,configurable:!0}),e}();e.Position=G;var H=function(){function e(e,t,n,r,o,i){this.Y=e,this.V=t,this.B=n,this.z=r,this.$=o,this.Q=i}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.Y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.V},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.B},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.z},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t1",{get:function(){return this.$},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t2",{get:function(){return this.Q},enumerable:!0,configurable:!0}),e}();e.Move=H;var K=function(){function e(e,t){this.I=e,this.X=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this.I},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.X},enumerable:!0,configurable:!0}),e}();e.RotationOrigin=K;var q=function(){function e(e,t){this.s=e,this.u=t}return Object.defineProperty(e.prototype,"start",{get:function(){return this.s},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.u},enumerable:!0,configurable:!0}),e}();e.Fade=q;var J=function(){function e(e,t,n,r,o,i,a){this.ee=e,this.te=t,this.re=n,this.$=r,this.Q=o,this.ne=i,this.ie=a}return Object.defineProperty(e.prototype,"a1",{get:function(){return this.ee},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a2",{get:function(){return this.te},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"a3",{get:function(){return this.re},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t1",{get:function(){return this.$},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t2",{get:function(){return this.Q},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t3",{get:function(){return this.ne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"t4",{get:function(){return this.ie},enumerable:!0,configurable:!0}),e}();e.ComplexFade=J;var Z=function(){function e(e,t,n,r){this.s=e,this.u=t,this.oe=n,this.ae=r}return Object.defineProperty(e.prototype,"start",{get:function(){return this.s},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.u},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accel",{get:function(){return this.oe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this.ae},enumerable:!0,configurable:!0}),e}();e.Transform=Z;var $=function(){function e(e,t,n,r,o){this.Y=e,this.V=t,this.B=n,this.z=r,this.le=o}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.Y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.V},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.B},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.z},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.le},enumerable:!0,configurable:!0}),e}();e.RectangularClip=$;var Q=function(){function e(e,t,n){this.se=e,this.ue=t,this.le=n}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.se},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instructions",{get:function(){return this.ue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.le},enumerable:!0,configurable:!0}),e}();e.VectorClip=Q;var ee=function(){function e(e){this.se=e}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.se},enumerable:!0,configurable:!0}),e}();e.DrawingMode=ee;var te=function(){function e(e){this.p=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.p},enumerable:!0,configurable:!0}),e}();e.DrawingBaselineOffset=te;var ne=function(){function e(e){this.ue=e}return Object.defineProperty(e.prototype,"instructions",{get:function(){return this.ue},enumerable:!0,configurable:!0}),e}();e.DrawingInstructions=ne;for(var re=function(e,t){if(!e.prototype.hasOwnProperty("toString")){var n=Object.getOwnPropertyNames(e.prototype).filter(function(e){return"constructor"!==e});e.prototype.toString=function(){var e=this;return t+" { "+n.map(function(t){return t+": "+e[t]}).join(", ")+(n.length>0?" ":"")+"}"}}},oe=t(38),ie=0,ae=Object.keys(e);ie<ae.length;ie++){var le=ae[ie],ue=e[le];ue instanceof Function&&(re(ue,le),oe.registerClassPrototype(ue.prototype))}for(var se=0,ce=Object.keys(n);se<ce.length;se++){var le=ce[se],ue=n[le];ue instanceof Function&&(re(ue,"Drawing"+le),oe.registerClassPrototype(ue.prototype))}},function(e,t){var n=t(23),r=t(11),o=function(){function e(e,t){this.pe=e,this.ce=t,this.he=new r.ManualClock,this.fe=null,this.de=null,this._e=null}return e.prototype.play=function(){this.he.enabled&&(this.ge(),this.he.play())},e.prototype.pause=function(){if(this.he.enabled){if(null===this.fe)return void(n.debugMode&&console.warn("AutoClock.pause: Abnormal state detected. AutoClock._nextAnimationFrameRequestId should not have been null."));this.ve(),this.he.pause()}},e.prototype.seeking=function(){this.he.seek(this.pe())},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.he.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.he.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.he.paused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rate",{get:function(){return this.he.rate},enumerable:!0,configurable:!0}),e.prototype.setRate=function(e){this.he.setRate(e)},e.prototype.enable=function(){return this.he.enable()?(this.ge(),!0):!1},e.prototype.disable=function(){return this.he.disable()?(this.ve(),!0):!1},e.prototype.toggle=function(){this.he.enabled?this.disable():this.enable()},e.prototype.setEnabled=function(e){return e?this.enable():this.disable()},e.prototype.addEventListener=function(e,t){this.he.addEventListener(e,t)},e.prototype.ye=function(e){var t=this;if(!this.he.enabled)return void(n.debugMode&&console.warn("AutoClock._onTimerTick: Called when disabled."));var r=this.he.currentTime,o=this.pe();this.he.paused?r!==o&&(this.de=o,this._e=e,this.he.tick(o)):null!==this.de&&o===this.de?e-this._e>this.ce?(this._e=null,this.he.pause()):this.he.tick((e-this._e)/1e3*this.he.rate+this.de):(this.de=o,this._e=e,this.he.tick(o)),this.fe=requestAnimationFrame(function(e){return t.ye(e)})},e.prototype.ge=function(){var e=this;null===this.fe&&(this.fe=requestAnimationFrame(function(t){return e.ye(t)}))},e.prototype.ve=function(){null!==this.fe&&(cancelAnimationFrame(this.fe),this.fe=null)},e}();e.AutoClock=o},function(e){var t=function(){function e(){}return e.prototype.addEventListener=function(e,t){var n=this.me.get(e);void 0===n&&this.me.set(e,n=[]),n.push(t)},e.prototype.be=function(e,t){var n=this.me.get(e);if(void 0!==n)for(var r=0;r<n.length;r++){var o=n[r];o.apply(this,t)}},e}();e.EventSource=t,function(e){e[e.Play=0]="Play",e[e.Tick=1]="Tick",e[e.Pause=2]="Pause",e[e.Stop=3]="Stop",e[e.RateChange=4]="RateChange"}(e.ClockEvent||(e.ClockEvent={}))},function(e,t){var n=t(31),r=t(30),o=t(10),i=function(){function e(){this.we=-1,this.Se=1,this.Oe=!0,this.Pe=!0,this.me=new r.Map}return e.prototype.play=function(){this.Oe&&this.Pe&&(this.Pe=!1,this.be(o.ClockEvent.Play,[]))},e.prototype.tick=function(e){this.Oe&&this.we!==e&&(this.play(),this.we=e,this.be(o.ClockEvent.Tick,[]))},e.prototype.seek=function(e){this.Oe&&(this.pause(),this.we!==e&&(this.stop(),this.tick(e),this.pause()))},e.prototype.pause=function(){this.Oe&&(this.Pe||(this.Pe=!0,this.be(o.ClockEvent.Pause,[])))},e.prototype.stop=function(){this.be(o.ClockEvent.Stop,[])},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.we},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.Oe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.Pe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rate",{get:function(){return this.Se},enumerable:!0,configurable:!0}),e.prototype.setRate=function(e){this.Se!==e&&(this.Se=e,this.be(o.ClockEvent.RateChange,[]))},e.prototype.enable=function(){return this.Oe?!1:(this.Oe=!0,!0)},e.prototype.disable=function(){return this.Oe?(this.pause(),this.stop(),this.Oe=!1,!0):!1},e.prototype.toggle=function(){this.Oe?this.disable():this.enable()},e.prototype.setEnabled=function(e){return e?this.enable():this.disable()},e}();e.ManualClock=i,n.mixin(i,[o.EventSource])},function(e,t){var n=t(9),r=function(){function e(e){var t=this;this.Ce=new n.AutoClock(function(){return e.currentTime},100),e.addEventListener("playing",function(){return t.Ce.play()},!1),e.addEventListener("pause",function(){return t.Ce.pause()},!1),e.addEventListener("seeking",function(){return t.Ce.seeking()},!1),e.addEventListener("ratechange",function(){return t.Ce.setRate(e.playbackRate)},!1)}return Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.Ce.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.Ce.enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.Ce.paused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rate",{get:function(){return this.Ce.rate},enumerable:!0,configurable:!0}),e.prototype.enable=function(){return this.Ce.enable()},e.prototype.disable=function(){return this.Ce.disable()},e.prototype.toggle=function(){this.Ce.enabled?this.disable():this.enable()},e.prototype.setEnabled=function(e){return e?this.enable():this.disable()},e.prototype.addEventListener=function(e,t){this.Ce.addEventListener(e,t)},e}();e.VideoClock=r},function(e,t){var n=t(34).ke,r=t(12),o=t(21),i=function(e){function t(t,n,o){e.call(this,n,new r.VideoClock(t),document.createElement("div"),o),this.Ee=t,this.Ee.parentElement.replaceChild(this.libjassSubsWrapper,this.Ee),this.libjassSubsWrapper.insertBefore(this.Ee,this.libjassSubsWrapper.firstElementChild)}return n(t,e),t.prototype.resize=function(){var t=this.Ee.videoWidth,n=this.Ee.videoHeight,r=this.Ee.offsetWidth,o=this.Ee.offsetHeight,i=Math.min(r/t,o/n),a=t*i,l=n*i,u=(r-a)/2,s=(o-l)/2;e.prototype.resize.call(this,a,l,u,s)},t.prototype.resizeVideo=function(){console.warn("`DefaultRenderer.resizeVideo(width, height)` has been deprecated. Use `DefaultRenderer.resize()` instead."),this.resize()},t.prototype.xe=function(){this.resize(),e.prototype.xe.call(this)},t}(o.WebRenderer);e.DefaultRenderer=i},function(e,t){var n=t(10);e.ClockEvent=n.ClockEvent,e.EventSource=n.EventSource;var r=t(9);e.AutoClock=r.AutoClock;var o=t(11);e.ManualClock=o.ManualClock;var i=t(12);e.VideoClock=i.VideoClock;var a=t(13);e.DefaultRenderer=a.DefaultRenderer;var l=t(15);e.NullRenderer=l.NullRenderer;var u=t(21);e.WebRenderer=u.WebRenderer;var s=t(16);e.RendererSettings=s.RendererSettings},function(e,t){var n=t(10),r=t(16),o=t(23),i=function(){function e(t,o,i){var a=this;this.f=t,this.je=o,this.Ae=++e.Te,this.De=r.RendererSettings.from(i),this.je.addEventListener(n.ClockEvent.Play,function(){return a.Fe()}),this.je.addEventListener(n.ClockEvent.Tick,function(){return a.Me()}),this.je.addEventListener(n.ClockEvent.Pause,function(){return a.Re()}),this.je.addEventListener(n.ClockEvent.Stop,function(){return a.Ne()}),this.je.addEventListener(n.ClockEvent.RateChange,function(){return a.We()})}return Object.defineProperty(e.prototype,"id",{get:function(){return this.Ae},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ass",{get:function(){return this.f},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clock",{get:function(){return this.je},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this.De},enumerable:!0,configurable:!0}),e.prototype.preRender=function(){},e.prototype.draw=function(){},e.prototype.enable=function(){return this.je.enable()},e.prototype.disable=function(){return this.je.disable()},e.prototype.toggle=function(){this.je.toggle()},e.prototype.setEnabled=function(e){return this.je.setEnabled(e)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this.je.enabled},enumerable:!0,configurable:!0}),e.prototype.Fe=function(){o.verboseMode&&console.log("NullRenderer._onClockPlay")},e.prototype.Me=function(){var e=this.je.currentTime;o.verboseMode&&console.log("NullRenderer._onClockTick: currentTime = "+e);for(var t=0,n=this.f.dialogues;t<n.length;t++){var r=n[t];r.end>e&&(r.start<=e?this.draw(r):r.start<=e+this.De.preRenderTime&&this.preRender(r))}},e.prototype.Re=function(){o.verboseMode&&console.log("NullRenderer._onClockPause")},e.prototype.Ne=function(){o.verboseMode&&console.log("NullRenderer._onClockStop")},e.prototype.We=function(){o.verboseMode&&console.log("NullRenderer._onClockRateChange")},e.Te=-1,e}();e.NullRenderer=i},function(e,t){function n(e){return e.type===CSSRule.FONT_FACE_RULE}var r=t(30),o=function(){function e(){}return e.makeFontMapFromStyleElement=function(e){for(var t=new r.Map,o=e.sheet,i=0;i<o.cssRules.length;i++){var a=o.cssRules[i];if(n(a)){var l=a.style.getPropertyValue("font-family").match(/^["']?(.*?)["']?$/)[1],u=a.style.getPropertyValue("src");u||(u=a.cssText.split("\n").map(function(e){return e.match(/src:\s*([^;]+?)\s*;/)}).filter(function(e){return null!==e}).map(function(e){return e[1]})[0]),t.set(l,u)}}return t},e.from=function(t){(void 0===t||null===t)&&(t={});var n=t,r=n.fontMap,o=void 0===r?null:r,i=n.preRenderTime,a=void 0===i?5:i,l=n.preciseOutlines,u=void 0===l?!1:l,s=n.enableSvg,c=void 0===s?!0:s,p=n.fallbackFonts,f=void 0===p?'Arial, Helvetica, sans-serif, "Segoe UI Symbol"':p,h=n.useAttachedFonts,d=void 0===h?!1:h,v=new e;return v.fontMap=o,v.preRenderTime=a,v.preciseOutlines=u,v.enableSvg=c,v.fallbackFonts=f,v.useAttachedFonts=d,v},e}();e.RendererSettings=o},function(e,t){var n=t(30),r=function(){function e(t,r){this.Le=r,this.Ie="",this.Xe=new n.Map,this.Ye=0,this.Ae=t.id+"-"+e.Ve++,this.Se=t.clock.rate}return Object.defineProperty(e.prototype,"animationStyle",{get:function(){return this.Ie},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDelays",{get:function(){return this.Xe},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){for(var n=null,r=null,o=0;o<t.length;o++){var i=t[o];null===n&&(n=i.time),r=i.time}for(var a="",l=0;l<t.length;l++){var i=t[l];a+="	"+(100*(r-n===0?1:(i.time-n)/(r-n))).toFixed(3)+"% {\n",i.properties.forEach(function(e,t){a+="		"+t+": "+e+";\n"}),a+="	}\n"}var u="animation-"+this.Ae+"-"+this.Ye++;this.Le.appendChild(document.createTextNode("@-webkit-keyframes "+u+" {\n"+a+"\n}")),this.Le.appendChild(document.createTextNode("@keyframes "+u+" {\n"+a+"\n}")),""!==this.Ie&&(this.Ie+=","),this.Ie+=u+" "+((r-n)/this.Se).toFixed(3)+"s "+e,this.Xe.set(u,n)},e.Ve=0,e}();e.AnimationCollection=r},function(e,t){var n=t(8),r=function(){function e(e,t){this.Be=e,this.ze=t,this.se=1,this.Ge=0}return Object.defineProperty(e.prototype,"scale",{set:function(e){this.se=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baselineOffset",{set:function(e){this.Ge=e},enumerable:!0,configurable:!0}),e.prototype.toSVG=function(e,t){for(var r=Math.pow(2,this.se-1),o=this.Be/r,i=this.ze/r,a=document.createElementNS("http://www.w3.org/2000/svg","path"),l=0,u=0,s=0,c=e.instructions;s<c.length;s++){var p=c[s];p instanceof n.drawing.MoveInstruction?(a.pathSegList.appendItem(a.createSVGPathSegMovetoAbs(p.x,p.y+this.Ge)),l=Math.max(l,p.x),u=Math.max(u,p.y+this.Ge)):p instanceof n.drawing.LineInstruction?(a.pathSegList.appendItem(a.createSVGPathSegLinetoAbs(p.x,p.y+this.Ge)),l=Math.max(l,p.x),u=Math.max(u,p.y+this.Ge)):p instanceof n.drawing.CubicBezierCurveInstruction&&(a.pathSegList.appendItem(a.createSVGPathSegCurvetoCubicAbs(p.x3,p.y3+this.Ge,p.x1,p.y1+this.Ge,p.x2,p.y2+this.Ge)),l=Math.max(l,p.x1,p.x2,p.x3),u=Math.max(u,p.y1+this.Ge,p.y2+this.Ge,p.y3+this.Ge))}var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("version","1.1"),f.width.baseVal.valueAsString=(l*o).toFixed(3)+"px",f.height.baseVal.valueAsString=(u*i).toFixed(3)+"px";var h=document.createElementNS("http://www.w3.org/2000/svg","g");return f.appendChild(h),h.setAttribute("transform","scale("+o.toFixed(3)+" "+i.toFixed(3)+")"),h.appendChild(a),a.setAttribute("fill",t.toString()),f},e}();e.DrawingStyles=r},function(e,t){function n(e,t,n,r){var o='"'+e+'"';""!==n&&(o+=", "+n),r.style.fontFamily=o,r.style.fontSize=t+"px"}function r(e,t,r,o){return n(e,t,r,o),new s.Promise(function(e){return setTimeout(function(){return e(o.offsetHeight)},1e3)})}function o(e,t,r,o){return n(e,t,r,o),o.offsetHeight}function i(e,t){return[e,180/(t-e)]}function a(e,t,n){return r(e,180,t,n).then(function(o){return r(e,360,t,n).then(function(e){return i(o,e)})})}function l(e,t,n){return 180+(e-t)*n}function u(e,t,n,r,a){var u=a.get(e);if(void 0===u){var s=o(e,180,n,r),c=o(e,360,n,r);a.set(e,u=i(s,c))}var p=u[0],f=u[1];return l(t,p,f)}var s=t(32);e.calculateFontMetrics=a,e.fontSizeForLineHeight=u},function(e){var t=function(){function e(e,t){this.qe=e,this.Ue=t}return Object.defineProperty(e.prototype,"time",{get:function(){return this.qe},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.Ue},enumerable:!0,configurable:!0}),e}();e.Keyframe=t},function(t,n){var r=n(34).ke,o=n(17),i=n(18),a=n(19),l=n(20),u=n(22),s=n(10),c=n(15),p=n(6),f=n(8),h=n(23),d=n(25),v=n(27),y=n(31),g=n(30),b=n(32),m=/^(url|local)\(["']?(.+?)["']?\)$/,w=function(t){function n(n,r,o,i){var a=this;t.call(this,n,r,function(){if(!(o instanceof HTMLDivElement)){var e=i;i=o,o=e,console.warn("WebRenderer's constructor now takes libjassSubsWrapper as the third parameter and settings as the fourth parameter. Please update the caller.")}return i}()),this.He=o,this.Ke=[],this.Ze=[],this.Je=new g.Map,this.$e=new g.Map,this.Qe=new g.Map,this.me=new g.Map,this.He.classList.add("libjass-wrapper"),this.et=document.createElement("div"),this.He.appendChild(this.et),this.et.className="libjass-subs",this.tt=document.createElement("div"),this.He.appendChild(this.tt),this.tt.className="libjass-font-measure",this.tt.appendChild(document.createTextNode("M")),h.debugMode&&console.log("Preloading fonts...");
var l=[],u=new g.Map,s=null===this.settings.fontMap?new g.Map:this.settings.fontMap,c=new g.Map;this.settings.useAttachedFonts&&n.attachments.forEach(function(e){if(e.type===d.AttachmentType.Font){var t=null;try{t=p.getTtfNames(e)}catch(e){return void console.error(e)}var n="data:application/x-font-ttf;base64,"+e.contents;t.forEach(function(e){var t=s.get(e);if(void 0!==t)if("string"!=typeof t)t.push(n);else{var r=c.get(e);void 0===r&&c.set(e,r=[]),r.push(n)}else s.set(e,[n])})}}),s.forEach(function(t,n){var r;if(e.document.fonts&&e.document.fonts.add){var o="string"==typeof t?t:t.map(function(e){return null!==e.match(m)?e:'url("'+e+'")'}).join(", "),i=c.get(n);if(void 0!==i)for(var s=0;s<i.length;s++){var p=i[s];o+=', url("'+p+'")'}var f=[];e.document.fonts.forEach(function(e){(e.family===n||e.family==='"'+n+'"')&&f.push(e)});var d;if(0===f.length){var v=new FontFace(n,o),y=new FontFace('"'+n+'"',o);e.document.fonts.add(v),e.document.fonts.add(y),d=b.any([v.load(),y.load()])}else d=b.any(f.map(function(e){return e.load()}));r=a.rt(n,d["catch"](function(e){return console.warn("Fetching fonts for "+n+" at "+o+" failed: %o",e),null}))}else{var g=("string"==typeof t?t.split(/,/):t).map(function(e){return e.trim()}).map(function(e){var t=e.match(m);return null===t?e:"local"===t[1]?null:t[2]}).filter(function(e){return null!==e}),i=c.get(n);void 0!==i&&(g=g.concat(i));var w=g.map(function(e){var t=u.get(e);return void 0===t&&(t=new b.Promise(function(t,n){var r=new XMLHttpRequest;r.addEventListener("load",function(){h.debugMode&&console.log("Preloaded "+e+"."),t(null)}),r.addEventListener("error",function(e){n(e)}),r.open("GET",e,!0),r.send()}),u.set(e,t)),t}),S=0===w.length?b.Promise.resolve(null):b.first(w)["catch"](function(e){return console.warn("Fetching fonts for "+n+" at "+g.join(", ")+" failed: %o",e),null});r=a.rt(n,S)}l.push(r.then(function(e){return a.Je.set(n,e)}))}),b.Promise.all(l).then(function(){h.debugMode&&console.log("All fonts have been preloaded."),a.xe()})}return r(n,t),Object.defineProperty(n.prototype,"libjassSubsWrapper",{get:function(){return this.He},enumerable:!0,configurable:!0}),n.prototype.resize=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.nt(),this.et.style.width=e.toFixed(3)+"px",this.et.style.height=t.toFixed(3)+"px",this.et.style.left=n.toFixed(3)+"px",this.et.style.top=r.toFixed(3)+"px",this.it=e,this.ot=e/this.ass.properties.resolutionX,this.at=t/this.ass.properties.resolutionY,this.Qe.clear(),-1!==this.clock.currentTime&&this.Me()},n.prototype.preRender=function(e){var t=this,r=this.Qe.get(e.id);if(r)return r;var a=this.clock.currentTime-e.start;if(e.containsTransformTag&&0>a)return null;var s=document.createElement("div");s.style.marginLeft=(this.ot*e.style.marginLeft).toFixed(3)+"px",s.style.marginRight=(this.ot*e.style.marginRight).toFixed(3)+"px",s.style.marginTop=s.style.marginBottom=(this.at*e.style.marginVertical).toFixed(3)+"px",s.style.minWidth=(this.it-this.ot*(e.style.marginLeft+e.style.marginRight)).toFixed(3)+"px";var c=document.createElement("style");c.id="libjass-animation-styles-"+this.id+"-"+e.id,c.type="text/css";var p=new o.AnimationCollection(this,c),d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("version","1.1"),d.setAttribute("class","libjass-filters"),d.width.baseVal.valueAsString="0",d.height.baseVal.valueAsString="0";var y=document.createElementNS("http://www.w3.org/2000/svg","defs");d.appendChild(y);var b=null,m=new u.SpanStyles(this,e,this.ot,this.at,this.settings,this.tt,y,this.Je),w=null,S=!1,C=function(e){null!==b&&b.hasChildNodes()&&s.appendChild(m.setStylesOnSpan(b,w)),null!==w&&w.animationDelays.forEach(function(e,t){return p.animationDelays.set(t,e)}),e&&(S?s.appendChild(m.makeNewLine()):s.appendChild(document.createElement("br"))),b=document.createElement("span"),w=new o.AnimationCollection(t,c),S=e};C(!1);for(var _=new i.DrawingStyles(this.ot,this.at),E=this.ass.properties.wrappingStyle,O=0,P=0,j=e.parts;P<j.length;P++){var x=j[P];if(x instanceof f.Italic)m.italic=x.value;else if(x instanceof f.Bold)m.bold=x.value;else if(x instanceof f.Underline)m.underline=x.value;else if(x instanceof f.StrikeThrough)m.strikeThrough=x.value;else if(x instanceof f.Border)m.outlineWidth=x.value,m.outlineHeight=x.value;else if(x instanceof f.BorderX)m.outlineWidth=x.value;else if(x instanceof f.BorderY)m.outlineHeight=x.value;else if(x instanceof f.Shadow)m.shadowDepthX=x.value,m.shadowDepthY=x.value;else if(x instanceof f.ShadowX)m.shadowDepthX=x.value;else if(x instanceof f.ShadowY)m.shadowDepthY=x.value;else if(x instanceof f.Blur)m.blur=x.value;else if(x instanceof f.GaussianBlur)m.gaussianBlur=x.value;else if(x instanceof f.FontName)m.fontName=x.value;else if(x instanceof f.FontSize)m.fontSize=x.value;else if(x instanceof f.FontSizePlus)m.fontSize+=x.value;else if(x instanceof f.FontSizeMinus)m.fontSize-=x.value;else if(x instanceof f.FontScaleX)m.fontScaleX=x.value;else if(x instanceof f.FontScaleY)m.fontScaleY=x.value;else if(x instanceof f.LetterSpacing)m.letterSpacing=x.value;else if(x instanceof f.RotateX)m.rotationX=x.value;else if(x instanceof f.RotateY)m.rotationY=x.value;else if(x instanceof f.RotateZ)m.rotationZ=x.value;else if(x instanceof f.SkewX)m.skewX=x.value;else if(x instanceof f.SkewY)m.skewY=x.value;else if(x instanceof f.PrimaryColor)m.primaryColor=x.value;else if(x instanceof f.SecondaryColor)m.secondaryColor=x.value;else if(x instanceof f.OutlineColor)m.outlineColor=x.value;else if(x instanceof f.ShadowColor)m.shadowColor=x.value;else if(x instanceof f.Alpha)m.primaryAlpha=x.value,m.secondaryAlpha=x.value,m.outlineAlpha=x.value,m.shadowAlpha=x.value;else if(x instanceof f.PrimaryAlpha)m.primaryAlpha=x.value;else if(x instanceof f.SecondaryAlpha)m.secondaryAlpha=x.value;else if(x instanceof f.OutlineAlpha)m.outlineAlpha=x.value;else if(x instanceof f.ShadowAlpha)m.shadowAlpha=x.value;else if(x instanceof f.Alignment);else if(x instanceof f.ColorKaraoke)C(!1),w.add("step-end",[new l.Keyframe(0,new g.Map([["color",m.secondaryColor.withAlpha(m.secondaryAlpha).toString()]])),new l.Keyframe(O,new g.Map([["color",m.primaryColor.withAlpha(m.primaryAlpha).toString()]]))]),O+=x.duration;else if(x instanceof f.WrappingStyle)E=x.value;else if(x instanceof f.Reset)m.reset(this.ass.styles.get(x.value));else if(x instanceof f.Position)s.style.position="absolute",s.style.left=(this.ot*x.x).toFixed(3)+"px",s.style.top=(this.at*x.y).toFixed(3)+"px";else if(x instanceof f.Move)s.style.position="absolute",p.add("linear",[new l.Keyframe(0,new g.Map([["left",(this.ot*x.x1).toFixed(3)+"px"],["top",(this.at*x.y1).toFixed(3)+"px"]])),new l.Keyframe(x.t1,new g.Map([["left",(this.ot*x.x1).toFixed(3)+"px"],["top",(this.at*x.y1).toFixed(3)+"px"]])),new l.Keyframe(x.t2,new g.Map([["left",(this.ot*x.x2).toFixed(3)+"px"],["top",(this.at*x.y2).toFixed(3)+"px"]])),new l.Keyframe(e.end-e.start,new g.Map([["left",(this.ot*x.x2).toFixed(3)+"px"],["top",(this.at*x.y2).toFixed(3)+"px"]]))]);else if(x instanceof f.Fade)p.add("linear",[new l.Keyframe(0,new g.Map([["opacity","0"]])),new l.Keyframe(x.start,new g.Map([["opacity","1"]])),new l.Keyframe(e.end-e.start-x.end,new g.Map([["opacity","1"]])),new l.Keyframe(e.end-e.start,new g.Map([["opacity","0"]]))]);else if(x instanceof f.ComplexFade)p.add("linear",[new l.Keyframe(0,new g.Map([["opacity",x.a1.toFixed(3)]])),new l.Keyframe(x.t1,new g.Map([["opacity",x.a1.toFixed(3)]])),new l.Keyframe(x.t2,new g.Map([["opacity",x.a2.toFixed(3)]])),new l.Keyframe(x.t3,new g.Map([["opacity",x.a2.toFixed(3)]])),new l.Keyframe(x.t4,new g.Map([["opacity",x.a3.toFixed(3)]])),new l.Keyframe(e.end-e.start,new g.Map([["opacity",x.a3.toFixed(3)]]))]);else if(x instanceof f.Transform)for(var M=a<=x.start?0:a>=x.end?1:Math.pow((a-x.start)/(x.end-x.start),x.accel),A=0,D=x.tags;A<D.length;A++){var F=D[A];F instanceof f.Border?(m.outlineWidth+=M*(F.value-m.outlineWidth),m.outlineHeight+=M*(F.value-m.outlineHeight)):F instanceof f.BorderX?m.outlineWidth+=M*(F.value-m.outlineWidth):F instanceof f.BorderY?m.outlineHeight+=M*(F.value-m.outlineHeight):F instanceof f.Shadow?(m.shadowDepthX+=M*(F.value-m.shadowDepthX),m.shadowDepthY+=M*(F.value-m.shadowDepthY)):F instanceof f.ShadowX?m.shadowDepthX+=M*(F.value-m.shadowDepthX):F instanceof f.ShadowY?m.shadowDepthY+=M*(F.value-m.shadowDepthY):F instanceof f.Blur?m.blur+=M*(F.value-m.blur):F instanceof f.GaussianBlur?m.gaussianBlur+=M*(F.value-m.gaussianBlur):F instanceof f.FontSize?m.fontSize+=M*(F.value-m.fontSize):F instanceof f.FontSizePlus?m.fontSize+=M*F.value:F instanceof f.FontSizeMinus?m.fontSize-=M*F.value:F instanceof f.FontScaleX?m.fontScaleX+=M*(F.value-m.fontScaleX):F instanceof f.FontScaleY?m.fontScaleY+=M*(F.value-m.fontScaleY):F instanceof f.LetterSpacing?m.letterSpacing+=M*(F.value-m.letterSpacing):F instanceof f.RotateX?m.rotationX+=M*(F.value-m.rotationX):F instanceof f.RotateY?m.rotationY+=M*(F.value-m.rotationY):F instanceof f.RotateZ?m.rotationZ+=M*(F.value-m.rotationZ):F instanceof f.SkewX?m.skewX+=M*(F.value-m.skewX):F instanceof f.SkewY?m.skewY+=M*(F.value-m.skewY):F instanceof f.PrimaryColor?m.primaryColor=m.primaryColor.interpolate(F.value,M):F instanceof f.SecondaryColor?m.secondaryColor=m.secondaryColor.interpolate(F.value,M):F instanceof f.OutlineColor?m.outlineColor=m.outlineColor.interpolate(F.value,M):F instanceof f.ShadowColor?m.shadowColor=m.shadowColor.interpolate(F.value,M):F instanceof f.Alpha?(m.primaryAlpha+=M*(F.value-m.primaryAlpha),m.secondaryAlpha+=M*(F.value-m.secondaryAlpha),m.outlineAlpha+=M*(F.value-m.outlineAlpha),m.shadowAlpha+=M*(F.value-m.shadowAlpha)):F instanceof f.PrimaryAlpha?m.primaryAlpha+=M*(F.value-m.primaryAlpha):F instanceof f.SecondaryAlpha?m.secondaryAlpha+=M*(F.value-m.secondaryAlpha):F instanceof f.OutlineAlpha?m.outlineAlpha+=M*(F.value-m.outlineAlpha):F instanceof f.ShadowAlpha&&(m.shadowAlpha+=M*(F.value-m.shadowAlpha))}else x instanceof f.DrawingMode?0!==x.scale&&(_.scale=x.scale):x instanceof f.DrawingBaselineOffset?_.baselineOffset=x.value:x instanceof f.DrawingInstructions?(b.appendChild(_.toSVG(x,m.primaryColor.withAlpha(m.primaryAlpha))),C(!1)):x instanceof f.Text?(b.appendChild(document.createTextNode(x.value+"â")),C(!1)):h.debugMode&&x instanceof f.Comment?(b.appendChild(document.createTextNode(x.value)),C(!1)):x instanceof f.NewLine&&C(!0)}for(var k=0,R=e.parts;k<R.length;k++){var x=R[k];if(x instanceof f.Position||x instanceof f.Move){var T=n.lt[e.alignment],L="translate("+-T[0]+"%, "+-T[1]+"%) translate(-"+s.style.marginLeft+", -"+s.style.marginTop+")",N=T[0]+"% "+T[1]+"%";s.style.webkitTransform=L,s.style.webkitTransformOrigin=N,s.style.transform=L,s.style.transformOrigin=N;break}}switch(E){case v.WrappingStyle.EndOfLineWrapping:s.style.whiteSpace="pre-wrap";break;case v.WrappingStyle.NoLineWrapping:s.style.whiteSpace="pre";break;case v.WrappingStyle.SmartWrappingWithWiderTopLine:case v.WrappingStyle.SmartWrappingWithWiderBottomLine:s.style.whiteSpace="pre-wrap"}if(""!==s.style.position)switch(e.alignment){case 1:case 4:case 7:s.style.textAlign="left";break;case 2:case 5:case 8:s.style.textAlign="center";break;case 3:case 6:case 9:s.style.textAlign="right"}s.style.webkitAnimation=p.animationStyle,s.style.animation=p.animationStyle,s.setAttribute("data-dialogue-id",this.id+"-"+e.id),""!==c.textContent&&s.appendChild(c),y.hasChildNodes()&&s.appendChild(d);var V={sub:s,animationDelays:p.animationDelays};return e.containsTransformTag||this.Qe.set(e.id,V),V},n.prototype.draw=function(e){var t=this;if(!this.$e.has(e)||e.containsTransformTag){h.debugMode&&console.log(e.toString());var n=this.Qe.get(e.id);void 0===n&&(n=this.preRender(e),h.debugMode&&console.log(e.toString()));var r=n.sub.cloneNode(!0),o=function(r){var o=r.style.animationName||r.style.webkitAnimationName;if(void 0!==o&&""!==o){var i=o.split(",").map(function(r){r=r.trim();var o=n.animationDelays.get(r);return((o+e.start-t.clock.currentTime)/t.clock.rate).toFixed(3)+"s"}).join(", ");r.style.webkitAnimationDelay=i,r.style.animationDelay=i}};o(r);for(var i=r.querySelectorAll('[style*="animation:"]'),a=0;a<i.length;a++)o(i[a]);var l=e.layer,u="absolute"===r.style.position?0:e.alignment;if(void 0===this.Ke[l]){var s=document.createElement("div");s.className="layer layer"+l;for(var c=null,p=l+1;p<this.Ke.length&&null===c;p++)void 0!==this.Ke[p]&&(c=this.Ke[p]);this.et.insertBefore(s,c),this.Ke[l]=s,this.Ze[l]=[]}if(void 0===this.Ze[l][u]){var f=document.createElement("div");f.className="an an"+u;for(var s=this.Ke[l],c=null,d=u+1;d<this.Ze[l].length&&null===c;d++)void 0!==this.Ze[l][d]&&(c=this.Ze[l][d]);s.insertBefore(f,c),this.Ze[l][u]=f}this.Ze[l][u].appendChild(r);var v=r.getElementsByTagName("style")[0];if(void 0!==v){var y=v.sheet;0===y.cssRules.length&&(y.cssText=v.textContent)}this.$e.set(e,r)}},n.prototype.Fe=function(){t.prototype.Fe.call(this),this.nt(),this.et.style.display="",this.et.classList.remove("paused")},n.prototype.Me=function(){var e=this,n=this.clock.currentTime;this.$e.forEach(function(t,r){(r.start>n||r.end<n||r.containsTransformTag)&&(e.$e["delete"](r),e.st(t))}),t.prototype.Me.call(this)},n.prototype.Re=function(){t.prototype.Re.call(this),this.et.classList.add("paused")},n.prototype.Ne=function(){t.prototype.Ne.call(this),this.et.style.display="none"},n.prototype.We=function(){t.prototype.We.call(this),this.Qe.clear()},n.prototype.xe=function(){this.be("ready",[])},n.prototype.rt=function(e,t){var n=this;return t.then(function(){var t=n.tt.cloneNode(!0);return n.He.appendChild(t),b.lastly(a.calculateFontMetrics(e,n.settings.fallbackFonts,t),function(){n.He.removeChild(t)})})},n.prototype.st=function(e){e.parentNode.removeChild(e)},n.prototype.nt=function(){var e=this;this.$e.forEach(function(t){return e.st(t)}),this.$e.clear()},n.lt=[null,[0,100],[50,100],[100,100],[0,50],[50,50],[100,50],[0,0],[50,0],[100,0]],n}(c.NullRenderer);t.WebRenderer=w,y.mixin(w,[s.EventSource])},function(e,t){var n=t(19),r=function(){function e(e,t,n,r,o,i,a,l){this.ot=n,this.at=r,this.De=o,this.tt=i,this.ut=a,this.Je=l,this.pt=0,this.Ae=e.id+"-"+t.id,this.ct=t.style,this.reset(null)}return e.prototype.reset=function(e){(void 0===e||null===e)&&(e=this.ct),this.italic=e.italic,this.bold=e.bold,this.underline=e.underline,this.strikeThrough=e.strikeThrough,this.outlineWidth=e.outlineThickness,this.outlineHeight=e.outlineThickness,this.shadowDepthX=e.shadowDepth,this.shadowDepthY=e.shadowDepth,this.fontName=e.fontName,this.fontSize=e.fontSize,this.fontScaleX=e.fontScaleX,this.fontScaleY=e.fontScaleY,this.letterSpacing=e.letterSpacing,this.ht=null,this.ft=null,this.dt=e.rotationZ,this._t=null,this.gt=null,this.primaryColor=e.primaryColor,this.secondaryColor=e.secondaryColor,this.outlineColor=e.outlineColor,this.shadowColor=e.shadowColor,this.primaryAlpha=e.primaryColor.alpha,this.secondaryAlpha=e.secondaryColor.alpha,this.outlineAlpha=e.outlineColor.alpha,this.shadowAlpha=e.shadowColor.alpha,this.blur=null,this.gaussianBlur=null},e.prototype.setStylesOnSpan=function(t,r){var o=t.childNodes[0]instanceof Text,i="";this.vt&&(i+="italic "),this.yt===!0?i+="bold ":this.yt!==!1&&(i+=this.yt+" ");var a=(this.at*n.fontSizeForLineHeight(this.mt,this.bt*(o?this.wt:1),this.De.fallbackFonts,this.tt,this.Je)).toFixed(3),l=(this.at*this.bt).toFixed(3),u=this.mt;switch(u){case"cursive":case"fantasy":case"monospace":case"sans-serif":case"serif":break;default:u='"'+u+'"'}""!==this.De.fallbackFonts&&(u+=", "+this.De.fallbackFonts),t.style.font=""+i+a+"px/"+l+"px "+u;var s="";this.St&&(s="underline"),this.Ot&&(s+=" line-through"),t.style.textDecoration=s.trim();var c="";if(o?this.Pt!==this.wt&&(c+="scaleY("+(this.Pt/this.wt).toFixed(3)+") "):(1!==this.wt&&(c+="scaleX("+this.wt+") "),1!==this.Pt&&(c+="scaleY("+this.Pt+") ")),null!==this.ft&&(c+="rotateY("+this.ft+"deg) "),null!==this.ht&&(c+="rotateX("+this.ht+"deg) "),0!==this.dt&&(c+="rotateZ("+-1*this.dt+"deg) "),null!==this._t||null!==this.gt){var p=e.Ct(this._t,0),f=e.Ct(this.gt,0);c+="matrix(1, "+f+", "+p+", 1, 0, 0) "}""!==c&&(t.style.webkitTransform=c,t.style.webkitTransformOrigin="50% 50%",t.style.transform=c,t.style.transformOrigin="50% 50%",t.style.display="inline-block"),t.style.letterSpacing=(this.ot*this.kt).toFixed(3)+"px";var h=this.ot*this.Et,d=this.at*this.xt,v=document.createElement("span");v.appendChild(t);var y=this.jt.withAlpha(this.At),g=this.Tt.withAlpha(this.Dt),b=this.Ft.withAlpha(this.Mt);if(this.De.enableSvg||(0!==h||0!==d)&&g.alpha!==y.alpha||(0!==this.Rt||0!==this.Nt)&&b.alpha!==y.alpha||(y=this.jt.withAlpha(1),g=this.Tt.withAlpha(1),b=this.Ft.withAlpha(1),t.style.opacity=this.At.toFixed(3)),t.style.color=y.toString(),this.De.enableSvg?this.Wt(v,h,d,g,this.At):this.Lt(t,h,d,g),0!==this.Rt||0!==this.Nt){var m=b.toString()+" "+(this.Rt*this.ot).toFixed(3)+"px "+(this.Nt*this.at).toFixed(3)+"px 0px";""===t.style.textShadow?t.style.textShadow=m:t.style.textShadow+=", "+m}return(0!==this.ht||0!==this.ft)&&(v.style.display="inline-block"),t.style.webkitAnimation=r.animationStyle,t.style.animation=r.animationStyle,v},e.prototype.Wt=function(e,t,n,r,o){var i="svg-filter-"+this.Ae+"-"+this.pt++,a=document.createElementNS("http://www.w3.org/2000/svg","filter");if(a.id=i,a.x.baseVal.valueAsString="-50%",a.width.baseVal.valueAsString="200%",a.y.baseVal.valueAsString="-50%",a.height.baseVal.valueAsString="200%",t>0||n>0){var l=0,u=!this.De.preciseOutlines&&this.It>0?this.It:1;!function(e){if(n>=t)if(t>0){var r;for(r=0;t>=r;r+=u)e(r,n/t*Math.sqrt(t*t-r*r));r!==t+u&&e(t,0)}else e(0,n);else if(n>0){var o;for(o=0;n>=o;o+=u)e(t/n*Math.sqrt(n*n-o*o),o);o!==n+u&&e(0,n)}else e(t,0)}(function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","feMorphology");a.appendChild(n),n.in1.baseVal="source",n.operator.baseVal=SVGFEMorphologyElement.SVG_MORPHOLOGY_OPERATOR_DILATE,n.radiusX.baseVal=e,n.radiusY.baseVal=t,n.result.baseVal="outline"+l,l++});var s=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer");a.insertBefore(s,a.firstElementChild),s.in1.baseVal="SourceAlpha",s.result.baseVal="source";var c=document.createElementNS("http://www.w3.org/2000/svg","feFuncA");s.appendChild(c),c.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,c.slope.baseVal=0===o?1:1/o,c.intercept.baseVal=0;var p=document.createElementNS("http://www.w3.org/2000/svg","feMerge");a.appendChild(p);for(var f=0;l>f;f++){var h=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");p.appendChild(h),h.in1.baseVal="outline"+f}var d=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer");a.appendChild(d),d.setAttribute("color-interpolation-filters","sRGB");var v=document.createElementNS("http://www.w3.org/2000/svg","feFuncR");d.appendChild(v),v.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,v.slope.baseVal=0,v.intercept.baseVal=r.red/255*r.alpha;var y=document.createElementNS("http://www.w3.org/2000/svg","feFuncG");d.appendChild(y),y.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,y.slope.baseVal=0,y.intercept.baseVal=r.green/255*r.alpha;var g=document.createElementNS("http://www.w3.org/2000/svg","feFuncB");d.appendChild(g),g.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,g.slope.baseVal=0,g.intercept.baseVal=r.blue/255*r.alpha;var b=document.createElementNS("http://www.w3.org/2000/svg","feFuncA");if(d.appendChild(b),b.type.baseVal=SVGComponentTransferFunctionElement.SVG_FECOMPONENTTRANSFER_TYPE_LINEAR,b.slope.baseVal=r.alpha,b.intercept.baseVal=0,this.It>0){var m=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");a.appendChild(m),m.stdDeviationX.baseVal=this.It,m.stdDeviationY.baseVal=this.It}for(var f=0;f<this.Xt;f++){var w=document.createElementNS("http://www.w3.org/2000/svg","feConvolveMatrix");a.appendChild(w),w.setAttribute("kernelMatrix","1 2 1 2 4 2 1 2 1"),w.edgeMode.baseVal=SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE}var S=document.createElementNS("http://www.w3.org/2000/svg","feComposite");a.appendChild(S),S.in2.baseVal="source",S.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_OUT;var C=document.createElementNS("http://www.w3.org/2000/svg","feMerge");a.appendChild(C);var _=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");C.appendChild(_);var E=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");C.appendChild(E),E.in1.baseVal="SourceGraphic"}else{if(this.It>0){var m=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");a.appendChild(m),m.stdDeviationX.baseVal=this.It,m.stdDeviationY.baseVal=this.It}for(var f=0;f<this.Xt;f++){var w=document.createElementNS("http://www.w3.org/2000/svg","feConvolveMatrix");a.appendChild(w),w.setAttribute("kernelMatrix","1 2 1 2 4 2 1 2 1"),w.edgeMode.baseVal=SVGFEConvolveMatrixElement.SVG_EDGEMODE_NONE}}a.childElementCount>0&&(this.ut.appendChild(a),e.style.webkitFilter='url("#'+i+'")',e.style.filter='url("#'+i+'")')},e.prototype.Lt=function(e,t,n,r){var o=this;if(t>0||n>0){var i="";!function(e){for(var r=0;t>=r;r++)for(var o=0===t?n:n*Math.sqrt(1-r*r/(t*t)),i=0;o>=i;i++)e(r,i),0!==r&&e(-r,i),0!==i&&e(r,-i),0!==r&&0!==i&&e(-r,-i)}(function(e,t){i+=", "+r.toString()+" "+e+"px "+t+"px "+o.It.toFixed(3)+"px"}),e.style.textShadow=i.substr(", ".length)}},e.prototype.makeNewLine=function(){var e=document.createElement("br");return e.style.lineHeight=(this.at*this.bt).toFixed(3)+"px",e},Object.defineProperty(e.prototype,"italic",{set:function(t){this.vt=e.Ct(t,this.ct.italic)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bold",{set:function(t){this.yt=e.Ct(t,this.ct.bold)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underline",{set:function(t){this.St=e.Ct(t,this.ct.underline)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strikeThrough",{set:function(t){this.Ot=e.Ct(t,this.ct.strikeThrough)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineWidth",{get:function(){return this.Et},set:function(t){this.Et=e.Ct(t,this.ct.outlineThickness)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineHeight",{get:function(){return this.Et},set:function(t){this.xt=e.Ct(t,this.ct.outlineThickness)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowDepthX",{get:function(){return this.Rt},set:function(t){this.Rt=e.Ct(t,this.ct.shadowDepth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowDepthY",{get:function(){return this.Nt},set:function(t){this.Nt=e.Ct(t,this.ct.shadowDepth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this.Xt},set:function(t){this.Xt=e.Ct(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gaussianBlur",{get:function(){return this.It},set:function(t){this.It=e.Ct(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{set:function(t){this.mt=e.Ct(t,this.ct.fontName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.bt},set:function(t){this.bt=e.Ct(t,this.ct.fontSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScaleX",{get:function(){return this.wt},set:function(t){this.wt=e.Ct(t,this.ct.fontScaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScaleY",{get:function(){return this.Pt},set:function(t){this.Pt=e.Ct(t,this.ct.fontScaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this.kt},set:function(t){this.kt=e.Ct(t,this.ct.letterSpacing)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this.ht},set:function(e){this.ht=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this.ft},set:function(e){this.ft=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this.dt},set:function(t){this.dt=e.Ct(t,this.ct.rotationZ)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skewX",{get:function(){return this._t},set:function(e){this._t=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skewY",{get:function(){return this.gt},set:function(e){this.gt=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primaryColor",{get:function(){return this.jt},set:function(t){this.jt=e.Ct(t,this.ct.primaryColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryColor",{get:function(){return this.Yt},set:function(t){this.Yt=e.Ct(t,this.ct.secondaryColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineColor",{get:function(){return this.Tt},set:function(t){this.Tt=e.Ct(t,this.ct.outlineColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return this.Ft},set:function(t){this.Ft=e.Ct(t,this.ct.shadowColor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primaryAlpha",{get:function(){return this.At},set:function(t){this.At=e.Ct(t,this.ct.primaryColor.alpha)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryAlpha",{get:function(){return this.Vt},set:function(t){this.Vt=e.Ct(t,this.ct.secondaryColor.alpha)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineAlpha",{get:function(){return this.Dt},set:function(t){this.Dt=e.Ct(t,this.ct.outlineColor.alpha)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowAlpha",{get:function(){return this.Mt},set:function(t){this.Mt=e.Ct(t,this.ct.shadowColor.alpha)},enumerable:!0,configurable:!0}),e.Ct=function(e,t){return null!==e?e:t},e}();e.SpanStyles=r},function(e){function t(t){e.debugMode=t}function n(t){e.verboseMode=t}e.debugMode=!1,e.verboseMode=!1,e.setDebugMode=t,e.setVerboseMode=n},function(t,n){var r=n(26),o=n(29),i=n(28),a=n(27),l=n(23),u=n(1),s=n(2),c=n(30),p=n(32),f=function(){function t(){if(this.Ue=new i.ScriptProperties,this.Bt=new c.Map,this.zt=[],this.Gt=[],this.qt=null,this.Ut=null,1===arguments.length)throw new Error("Constructor `new ASS(rawASS)` has been deprecated. Use `ASS.fromString(rawASS)` instead.");this.Bt.set("Default",new o.Style(new c.Map([["Name","Default"]])))}return Object.defineProperty(t.prototype,"properties",{get:function(){return this.Ue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.Bt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialogues",{get:function(){return this.zt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attachments",{get:function(){return this.Gt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stylesFormatSpecifier",{get:function(){return this.qt},set:function(e){this.qt=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dialoguesFormatSpecifier",{get:function(){return this.Ut},set:function(e){this.Ut=e},enumerable:!0,configurable:!0}),t.prototype.addStyle=function(e){var t=s.parseLineIntoTypedTemplate(e,this.qt);if(null!==t&&"Style"===t.type){var n=t.template;if(l.verboseMode){var r="";n.forEach(function(e,t){return r+=t+" = "+e+", "}),console.log("Read style: "+r)}var i=new o.Style(n);this.Bt.set(i.name,i)}},t.prototype.addEvent=function(e){var t=s.parseLineIntoTypedTemplate(e,this.Ut);if(null!==t&&"Dialogue"===t.type){var n=t.template;if(l.verboseMode){var o="";n.forEach(function(e,t){return o+=t+" = "+e+", "}),console.log("Read dialogue: "+o)}this.dialogues.push(new r.Dialogue(n,this))}},t.prototype.addAttachment=function(e){this.Gt.push(e)},t.fromString=function(e,n){return void 0===n&&(n=a.Format.ASS),t.fromStream(new u.StringStream(e),n)},t.fromStream=function(e,t){switch(void 0===t&&(t=a.Format.ASS),t){case a.Format.ASS:return new u.StreamParser(e).ass;case a.Format.SRT:return new u.SrtStreamParser(e).ass;default:throw new Error("Illegal value of type: "+t)}},t.fromUrl=function(n,r){void 0===r&&(r=a.Format.ASS);var o;return o="function"==typeof e.fetch&&"function"==typeof e.ReadableStream&&"function"==typeof e.ReadableStream.prototype.getReader&&"function"==typeof e.TextDecoder?e.fetch(n).then(function(e){if(e.ok===!1||void 0===e.ok&&(e.status<200||e.status>299))throw new Error("HTTP request for "+n+" failed with status code "+e.status);return t.fromReadableStream(e.body,"utf-8",r)}):p.Promise.reject(new Error("Not supported.")),o["catch"](function(e){console.warn("fetch() failed, falling back to XHR: %o",e);var o=new XMLHttpRequest,i=t.fromStream(new u.XhrStream(o),r);return o.open("GET",n,!0),o.send(),i})},t.fromReadableStream=function(e,n,r){return void 0===n&&(n="utf-8"),void 0===r&&(r=a.Format.ASS),t.fromStream(new u.BrowserReadableStream(e,n),r)},t}();t.ASS=f},function(e){!function(e){e[e.Font=0]="Font",e[e.Graphic=1]="Graphic"}(e.AttachmentType||(e.AttachmentType={}));var t=function(){function e(e,t){this.Ht=e,this.Kt=t,this.Zt=""}return Object.defineProperty(e.prototype,"filename",{get:function(){return this.Ht},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.Kt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contents",{get:function(){return this.Zt},set:function(e){this.Zt=e},enumerable:!0,configurable:!0}),e}();e.Attachment=t},function(e,t){var n=t(27),r=t(3),o=t(8),i=t(23),a=t(30),l=function(){function e(t,r){this.Jt=null,this.$t=!1;var o=new a.Map;t.forEach(function(e,t){o.set(t.toLowerCase(),e)}),t=o,this.Ae=++e.Qt;var l=t.get("style");if(void 0!==l&&null!==l&&l.constructor===String&&(l=l.replace(/^\*+/,""),null!==l.match(/^Default$/i)&&(l="Default")),this.Le=r.styles.get(l),void 0===this.Le&&(i.debugMode&&console.warn("Unrecognized style "+l+'. Falling back to "Default"'),this.Le=r.styles.get("Default")),void 0===this.Le)throw new Error("Unrecognized style "+l);if(this.s=e.er(t.get("start")),this.u=e.er(t.get("end")),this.tr=Math.max(n.valueOrDefault(t,"layer",parseInt,function(e){return!isNaN(e)},"0"),0),this.rr=t.get("text"),void 0===this.rr||null===this.rr||this.rr.constructor!==String)throw new Error("Dialogue doesn't have any text.")}return Object.defineProperty(e.prototype,"id",{get:function(){return this.Ae},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.s},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.u},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.Le},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return null===this.Jt&&this.nr(),this.ir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this.tr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parts",{get:function(){return null===this.Jt&&this.nr(),this.Jt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containsTransformTag",{get:function(){return null===this.Jt&&this.nr(),this.$t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"#"+this.Ae+" ["+this.s.toFixed(3)+"-"+this.u.toFixed(3)+"] "+(null!==this.Jt?this.Jt.join(", "):this.rr)},e.prototype.nr=function(){var e=this;if(this.Jt=r.parse(this.rr,"dialogueParts"),this.ir=this.Le.alignment,this.Jt.forEach(function(t,n){t instanceof o.Alignment?e.ir=t.value:t instanceof o.Move?(null===t.t1||null===t.t2)&&(e.Jt[n]=new o.Move(t.x1,t.y1,t.x2,t.y2,0,e.u-e.s)):t instanceof o.Transform&&((null===t.start||null===t.end||null===t.accel)&&(e.Jt[n]=new o.Transform(null===t.start?0:t.start,null===t.end?e.u-e.s:t.end,null===t.accel?1:t.accel,t.tags)),e.$t=!0)}),i.debugMode){var t=this.Jt.filter(function(e){return e instanceof o.Comment&&-1!==e.value.indexOf("\\");
});t.length>0&&console.warn("Possible incorrect parse:\n"+this.rr+"\nwas parsed as\n"+this.toString()+"\nThe possibly incorrect parses are:\n"+t.join("\n"))}},e.er=function(e){return e.split(":").reduce(function(e,t){return 60*e+parseFloat(t)},0)},e.Qt=-1,e}();e.Dialogue=l},function(e){function t(e,t,n,r,o){var i=e.get(t);if(void 0===i)return n(o);try{var a=n(i);if(null!==r&&!r(a))throw new Error("Validation failed.");return a}catch(e){throw new Error("Property "+t+" has invalid value "+i+" - "+e.stack)}}!function(e){e[e.ASS=0]="ASS",e[e.SRT=1]="SRT"}(e.Format||(e.Format={})),function(e){e[e.SmartWrappingWithWiderTopLine=0]="SmartWrappingWithWiderTopLine",e[e.SmartWrappingWithWiderBottomLine=3]="SmartWrappingWithWiderBottomLine",e[e.EndOfLineWrapping=1]="EndOfLineWrapping",e[e.NoLineWrapping=2]="NoLineWrapping"}(e.WrappingStyle||(e.WrappingStyle={})),function(e){e[e.Outline=1]="Outline",e[e.OpaqueBox=3]="OpaqueBox"}(e.BorderStyle||(e.BorderStyle={})),e.valueOrDefault=t},function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"resolutionX",{get:function(){return this.or},set:function(e){this.or=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resolutionY",{get:function(){return this.ar},set:function(e){this.ar=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrappingStyle",{get:function(){return this.lr},set:function(e){this.lr=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleBorderAndShadow",{get:function(){return this.sr},set:function(e){this.sr=e},enumerable:!0,configurable:!0}),e}();e.ScriptProperties=t},function(e,t){var n=t(27),r=t(3),o=t(30),i=function(){function e(e){var t=new o.Map;if(e.forEach(function(e,n){t.set(n.toLowerCase(),e)}),e=t,this.ur=e.get("name"),void 0===this.ur||null===this.ur||this.ur.constructor!==String)throw new Error("Style doesn't have a name.");this.ur=this.ur.replace(/^\*+/,""),this.vt=!!n.valueOrDefault(e,"italic",parseFloat,function(e){return!isNaN(e)},"0"),this.yt=!!n.valueOrDefault(e,"bold",parseFloat,function(e){return!isNaN(e)},"0"),this.St=!!n.valueOrDefault(e,"underline",parseFloat,function(e){return!isNaN(e)},"0"),this.Ot=!!n.valueOrDefault(e,"strikeout",parseFloat,function(e){return!isNaN(e)},"0"),this.mt=n.valueOrDefault(e,"fontname",function(e){return e},function(e){return e.constructor===String},"sans-serif"),this.bt=n.valueOrDefault(e,"fontsize",parseFloat,function(e){return!isNaN(e)},"18"),this.wt=n.valueOrDefault(e,"scalex",parseFloat,function(e){return e>=0},"100")/100,this.Pt=n.valueOrDefault(e,"scaley",parseFloat,function(e){return e>=0},"100")/100,this.kt=n.valueOrDefault(e,"spacing",parseFloat,function(e){return e>=0},"0"),this.dt=n.valueOrDefault(e,"angle",parseFloat,function(e){return!isNaN(e)},"0"),this.jt=n.valueOrDefault(e,"primarycolour",function(e){return r.parse(e,"colorWithAlpha")},null,"&H00FFFFFF"),this.Yt=n.valueOrDefault(e,"secondarycolour",function(e){return r.parse(e,"colorWithAlpha")},null,"&H00FFFF00"),this.Tt=n.valueOrDefault(e,"outlinecolour",function(e){return r.parse(e,"colorWithAlpha")},null,"&H00000000"),this.Ft=n.valueOrDefault(e,"backcolour",function(e){return r.parse(e,"colorWithAlpha")},null,"&H80000000"),this.pr=n.valueOrDefault(e,"outline",parseFloat,function(e){return e>=0},"2"),this.cr=n.valueOrDefault(e,"borderstyle",parseInt,function(e){return n.BorderStyle[n.BorderStyle[e]]===e},"1"),this.hr=n.valueOrDefault(e,"shadow",parseFloat,function(e){return e>=0},"3"),this.ir=n.valueOrDefault(e,"alignment",parseInt,function(e){return e>=1&&9>=e},"2"),this.fr=n.valueOrDefault(e,"marginl",parseFloat,function(e){return!isNaN(e)},"20"),this.dr=n.valueOrDefault(e,"marginr",parseFloat,function(e){return!isNaN(e)},"20"),this._r=n.valueOrDefault(e,"marginv",parseFloat,function(e){return!isNaN(e)},"20")}return Object.defineProperty(e.prototype,"name",{get:function(){return this.ur},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return this.vt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return this.yt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return this.St},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strikeThrough",{get:function(){return this.Ot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this.mt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.bt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScaleX",{get:function(){return this.wt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontScaleY",{get:function(){return this.Pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this.kt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this.dt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"primaryColor",{get:function(){return this.jt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryColor",{get:function(){return this.Yt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineColor",{get:function(){return this.Tt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowColor",{get:function(){return this.Ft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outlineThickness",{get:function(){return this.pr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderStyle",{get:function(){return this.cr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowDepth",{get:function(){return this.hr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this.ir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginLeft",{get:function(){return this.fr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginRight",{get:function(){return this.dr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginVertical",{get:function(){return this._r},enumerable:!0,configurable:!0}),e}();e.Style=i},function(t){function n(e){null!==e?t.Map=e:t.Map=r}t.Map=e.Map;var r=function(){function e(e){if(this.clear(),void 0!==e){if(!Array.isArray(e))throw new Error("Non-array iterables are not supported by the SimpleMap constructor.");for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}}}return e.prototype.get=function(e){var t=this.gr(e);return null!==t?this.vr[t]:void 0},e.prototype.has=function(e){var t=this.gr(e);return null===t?!1:t in this.yr},e.prototype.set=function(e,t){var n=this.gr(e);if(null===n)throw new Error("This Map implementation only supports Number and String keys, or keys with an id property.");return n in this.yr||this.mr++,this.yr[n]=e,this.vr[n]=t,this},e.prototype["delete"]=function(e){var t=this.gr(e);if(null===t)return!1;var n=t in this.yr;return n&&(delete this.yr[t],delete this.vr[t],this.mr--),n},e.prototype.clear=function(){this.yr=Object.create(null),this.vr=Object.create(null),this.mr=0},e.prototype.forEach=function(e,t){for(var n=0,r=Object.keys(this.yr);n<r.length;n++){var o=r[n];e.call(t,this.vr[o],this.yr[o],this)}},Object.defineProperty(e.prototype,"size",{get:function(){return this.mr},enumerable:!0,configurable:!0}),e.prototype.gr=function(e){return"number"==typeof e?"#"+e:"string"==typeof e?"'"+e:void 0!==e.id?"!"+e.id:null},e}();(void 0===t.Map||"function"!=typeof t.Map.prototype.forEach||function(){try{return 2!==new t.Map([[1,"foo"],[2,"bar"]]).size}catch(e){return!0}}())&&(t.Map=r),t.setImplementation=n},function(e){function t(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],o=0,i=Object.getOwnPropertyNames(r.prototype);o<i.length;o++){var a=i[o];e.prototype[a]=r.prototype[a]}}e.mixin=t},function(t){function n(e){null!==e?t.Promise=e:t.Promise=u}function r(e){return o(e,[])}function o(e,n){if(0===e.length)return t.Promise.reject(n);var r=e[0],i=e.slice(1);return r["catch"](function(e){return o(i,n.concat(e))})}function i(e){return new t.Promise(function(n,r){return t.Promise.all(e.map(function(e){return e.then(n,function(e){return e})})).then(r)})}function a(e,t){return e.then(function(e){return t(),e},function(e){throw t(),e})}t.Promise=e.Promise;var l=function(){var t=e.MutationObserver||e.WebkitMutationObserver;if(void 0!==e.process&&"function"==typeof e.process.nextTick)return function(t){e.process.nextTick(t)};if(void 0!==t){var n=[],r=!1,o=document.createElement("div"),i=new t(function(){for(var e=n.splice(0,n.length),t=0;t<e.length;t++){var i=e[t];i()}r=!1,n.length>0&&(o.classList.toggle("foo"),r=!0)});return i.observe(o,{attributes:!0}),function(e){n.push(e),r||(o.classList.toggle("foo"),r=!0)}}return function(e){return setTimeout(e,0)}}(),u=function(){function e(e){if(this.br=s.PENDING,this.wr=[],this.Sr=[],this.Or=null,this.Pr=null,"function"!=typeof e)throw new TypeError('typeof executor !== "function"');var t=this.Cr(),n=t.resolve,r=t.reject;try{e(n,r)}catch(e){r(e)}}return e.prototype.then=function(e,t){var n=new c;"function"!=typeof e&&(e=function(e){return e}),"function"!=typeof t&&(t=function(e){throw e});var r={capabilities:n,handler:e},o={capabilities:n,handler:t};switch(this.br){case s.PENDING:this.wr.push(r),this.Sr.push(o);break;case s.FULFILLED:this.kr(r,this.Or);break;case s.REJECTED:this.Er(o,this.Pr)}return n.promise},e.prototype["catch"]=function(e){return this.then(null,e)},e.resolve=function(n){return n instanceof e?n:new t.Promise(function(e){return e(n)})},e.reject=function(e){return new t.Promise(function(t,n){return n(e)})},e.all=function(e){return new t.Promise(function(n,r){var o=[],i=e.length;return 0===i?void n(o):void e.forEach(function(e,a){return t.Promise.resolve(e).then(function(e){o[a]=e,i--,0===i&&n(o)},r)})})},e.race=function(e){return new t.Promise(function(n,r){for(var o=0;o<e.length;o++){var i=e[o];t.Promise.resolve(i).then(n,r)}})},e.prototype.Cr=function(){var e=this,t=!1,n=function(t){if(!r){if(r=!0,t===e)return void e.xr(new TypeError("resolution === this"));if(null===t||"object"!=typeof t&&"function"!=typeof t)return void e.jr(t);try{var n=t.then}catch(r){return void e.xr(r)}return"function"!=typeof n?void e.jr(t):void l(function(){return e.Ar(t,n)})}},r=function(n){t||(t=!0,e.xr(n))};return{resolve:n,reject:r}},e.prototype.Ar=function(e,t){var n=this.Cr(),r=n.resolve,o=n.reject;try{t.call(e,r,o)}catch(e){o(e)}},e.prototype.jr=function(e){var t=this.wr;this.Or=e,this.wr=void 0,this.Sr=void 0,this.br=s.FULFILLED;for(var n=0;n<t.length;n++){var r=t[n];this.kr(r,e)}},e.prototype.xr=function(e){var t=this.Sr;this.Pr=e,this.wr=void 0,this.Sr=void 0,this.br=s.REJECTED;for(var n=0;n<t.length;n++){var r=t[n];this.Er(r,e)}},e.prototype.kr=function(e,t){l(function(){var e,n=a.capabilities,r=n.resolve,o=n.reject,i=a.handler;try{e=i(t)}catch(a){return void o(a)}r(e)})},e.prototype.Er=function(e,t){l(function(){var e,n=a.capabilities,r=n.resolve,o=n.reject,i=a.handler;try{e=i(t)}catch(a){return void o(a)}r(e)})},e}();void 0===t.Promise&&(t.Promise=u);var s;!function(e){e[e.PENDING=0]="PENDING",e[e.FULFILLED=1]="FULFILLED",e[e.REJECTED=2]="REJECTED"}(s||(s={})),t.setImplementation=n;var c=function(){function e(){var e=this;this.Tr=new t.Promise(function(t,n){Object.defineProperties(e,{resolve:{value:t,enumerable:!0},reject:{value:n,enumerable:!0}})})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this.Tr},enumerable:!0,configurable:!0}),e}();t.DeferredPromise=c,t.first=r,t.any=i,t.lastly=a},function(t){function n(e){null!==e?t.Set=e:t.Set=r}t.Set=e.Set;var r=function(){function e(e){if(this.clear(),void 0!==e){if(!Array.isArray(e))throw new Error("Non-array iterables are not supported by the SimpleSet constructor.");for(var t=0;t<e.length;t++){var n=e[t];this.add(n)}}}return e.prototype.add=function(e){var t=this.Dr(e);if(null===t)throw new Error("This Set implementation only supports Number and String values.");return t in this.Fr||this.mr++,this.Fr[t]=e,this},e.prototype.clear=function(){this.Fr=Object.create(null),this.mr=0},e.prototype.has=function(e){var t=this.Dr(e);return null===t?!1:t in this.Fr},e.prototype.forEach=function(e,t){for(var n=0,r=Object.keys(this.Fr);n<r.length;n++){var o=r[n],i=this.Fr[o];e.call(t,i,i,this)}},Object.defineProperty(e.prototype,"size",{get:function(){return this.mr},enumerable:!0,configurable:!0}),e.prototype.Dr=function(e){return"number"==typeof e?"#"+e:"string"==typeof e?"'"+e:null},e}();(void 0===t.Set||"function"!=typeof t.Set.prototype.forEach||function(){try{return 2!==new t.Set([1,2]).size}catch(e){return!0}}())&&(t.Set=r),t.setImplementation=n},function(e){function t(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}function n(e,t,n){return arguments.length<3?r(e.reverse(),t):void o(e.reverse(),t,n)}function r(e,t){for(var n=0;n<e.length;n++){var r=e[n];t=r(t)||t}return t}function o(e,t,n){for(var r=0;r<e.length;r++){var o=e[r];o(t,n)}}e.ke=t,e.L=n},function(e,t){var n=t(30),r=t(32),o=t(36),i=t(38),a=function(){function e(e){var t=this;this.Mr=e,this.Rr=new n.Map,this.Mr.addEventListener("message",function(e){return t.Nr(e.data)},!1)}return e.prototype.request=function(t,n){var o=new r.DeferredPromise,a=++e.Wr;this.Rr.set(a,o);var l={requestId:a,command:t,parameters:n};return this.Mr.postMessage(i.serialize(l)),o.promise},e.prototype.cancelRequest=function(e){var t=this.Rr.get(e);void 0!==t&&(this.Rr["delete"](e),t.reject(new Error("Cancelled.")))},e.prototype.Lr=function(e){var t=e.requestId,n=e.error,r=e.result;n instanceof Error&&(n={message:n.message,stack:n.stack}),this.Mr.postMessage(i.serialize({command:o.WorkerCommands.Response,requestId:t,error:n,result:r}))},e.prototype.Nr=function(e){var t=this,n=i.deserialize(e);if(n.command===o.WorkerCommands.Response){var r=n,a=this.Rr.get(r.requestId);void 0!==a&&(this.Rr["delete"](r.requestId),null===r.error?a.resolve(r.result):a.reject(r.error))}else{var l=n,u=l.requestId,s=i.getWorkerCommandHandler(l.command);if(void 0===s)return void this.Lr({requestId:u,error:new Error("No handler registered for command "+l.command),result:null});s(l.parameters).then(function(e){return{requestId:u,error:null,result:e}},function(e){return{requestId:u,error:e,result:null}}).then(function(e){return t.Lr(e)})}},e.Wr=-1,e}();e.WorkerChannelImpl=a,i.registerWorkerCommand(o.WorkerCommands.Ping,function(){return new r.Promise(function(e){return e(null)})})},function(e){!function(e){e[e.Response=0]="Response",e[e.Parse=1]="Parse",e[e.Ping=2]="Ping"}(e.WorkerCommands||(e.WorkerCommands={}))},function(t,n){function r(e){return void 0===e&&(e=a.src),new o.WorkerChannelImpl(new Worker(e))}var o=n(35),i=n(36);t.WorkerCommands=i.WorkerCommands,t.supported="undefined"!=typeof Worker;var a="undefined"!=typeof document&&void 0!==document.currentScript?document.currentScript:null;t.createWorker=r,"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope&&new o.WorkerChannelImpl(e)},function(e,t){function n(e,t){u.set(e,t)}function r(e){return u.get(e)}function o(e){e.Ir=s.size,s.set(e.Ir,e)}function i(e){return JSON.stringify(e,function(e,t){return t&&void 0!==t.Ir&&(t.Ir=t.Ir),t})}function a(e){return JSON.parse(e,function(e,t){if(t&&void 0!==t.Ir){for(var n=Object.create(s.get(t.Ir)),r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];"_classTag"!==i&&(n[i]=t[i])}t=n}return t})}var l=t(30),u=new l.Map,s=new l.Map;e.registerWorkerCommand=n,e.getWorkerCommandHandler=r,e.registerClassPrototype=o,e.serialize=i,e.deserialize=a}])})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=e.videoChoice,n=e.assChoice,r=e.videoFile,o=e.videoUrl,i=e.videoDummyResolution,a=e.videoDummyColor,l=e.videoDummyDuration,u=e.assFile,s=e.assUrl,p=e.assText,f=e.enableSvg,h=e.onVideoChoiceChanged,d=e.onVideoFileChanged,g=e.onVideoUrlChanged,b=e.onVideoDummyResolutionChanged,m=e.onVideoDummyColorChanged,w=e.onVideoDummyDurationChanged,S=e.onAssChoiceChanged,C=e.onAssFileChanged,_=e.onAssUrlChanged,E=e.onAssTextChanged,O=e.onEnableDisableSvg,P=e.onSelected,j="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL,x="function"==typeof HTMLCanvasElement.prototype.captureStream&&"undefined"!=typeof MediaRecorder&&"undefined"!=typeof MediaSource&&"function"==typeof MediaSource.isTypeSupported,M=function(){switch(t){case v.LocalFile:return null!==r;case v.Url:return null!==o&&o.length>0;case v.Sample:return!0;case v.Dummy:return null!==i&&null!==a&&null!==l}}(),A=function(){switch(n){case y.LocalFile:return null!==u;case y.Url:return null!==s&&s.length>0;case y.Text:return null!==p}}();return c["default"].createElement("div",null,c["default"].createElement("fieldset",null,c["default"].createElement("legend",null,"Choose a video"),c["default"].createElement("ul",{className:"choices-list"},c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"video-choice",disabled:!j,checked:t===v.LocalFile,onChange:function(){return h(v.LocalFile)}})," Local file (The file won't be uploaded. It will be used directly within your browser.)",j?"":" (This browser doesn't support URL.createObjectURL)"),c["default"].createElement("input",{type:"file",accept:"video/*",disabled:!j,defaultValue:null,onChange:function(e){return d(1===e.target.files.length?URL.createObjectURL(e.target.files[0]):null)}})),c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"video-choice",checked:t===v.Url,onChange:function(){return h(v.Url)}})," Direct video URL (webm / MP4)"),c["default"].createElement("input",{type:"url",value:null===o?"":o,onChange:function(e){return g(e.target.value)}})),c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"video-choice",checked:t===v.Sample,onChange:function(){return h(v.Sample)}}),' Sample video (75s long 1280x720, meant to be used with the default "Text" ASS option below)')),c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"video-choice",disabled:!x,checked:t===v.Dummy,onChange:function(){return h(v.Dummy)}})," Dummy video",x?"":" (This browser doesn't support generating dummy video. Consider using Firefox 46 or newer and enabling media.mediasource.webm.enabled in about:config)"),c["default"].createElement("select",{disabled:!x,defaultValue:i.join("x"),onChange:function(e){return b(e.target.value.split("x").map(function(e){return parseInt(e)}))}},c["default"].createElement("option",{value:"640x480"},"640 x 480 (SD fullscreen)"),c["default"].createElement("option",{value:"704x480"},"704 x 480 (SD anamorphic)"),c["default"].createElement("option",{value:"640x360"},"640 x 360 (SD widescreen)"),c["default"].createElement("option",{value:"704x396"},"704 x 396 (SD widescreen)"),c["default"].createElement("option",{value:"640x352"},"640 x 352 (SD widescreen MOD16)"),c["default"].createElement("option",{value:"704x400"},"704 x 400 (SD widescreen MOD16)"),c["default"].createElement("option",{value:"1280x720"},"1280 x 720 (HD 720p)"),c["default"].createElement("option",{value:"1920x1080"},"1920 x 1080 (HD 1080p)"),c["default"].createElement("option",{value:"1024x576"},"1024 x 576 (SuperPAL widescreen)")),c["default"].createElement("input",{type:"number",value:i[0],onChange:function(e){return b([parseInt(e.target.value),i[1]])}}),c["default"].createElement("input",{type:"number",value:i[1],onChange:function(e){return b([i[0],parseInt(e.target.value)])}}),c["default"].createElement("input",{type:"color",disabled:!x,value:a,onChange:function(e){return m(e.target.value)}}),c["default"].createElement("label",null,c["default"].createElement("input",{type:"number",disabled:!x,value:Math.floor(l/60),onChange:function(e){try{w(60*parseInt(e.target.value))}catch(t){w(null)}}})," mins")))),c["default"].createElement("fieldset",null,c["default"].createElement("legend",null,"Choose an ASS script"),c["default"].createElement("ul",{className:"choices-list"},c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"ass-choice",disabled:!j,checked:n===y.LocalFile,onChange:function(){return S(y.LocalFile)}})," Local file (The file won't be uploaded. It will be used directly within your browser.)",j?"":" (This browser doesn't support URL.createObjectURL)"),c["default"].createElement("input",{type:"file",accept:".ass",disabled:!j,defaultValue:null,onChange:function(e){return C(1===e.target.files.length?URL.createObjectURL(e.target.files[0]):null)}})),c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"ass-choice",checked:n===y.Url,onChange:function(){return S(y.Url)}})," Direct script URL (must be accessible via CORS)"),c["default"].createElement("input",{type:"url",value:null===s?"":s,onChange:function(e){return _(e.target.value)}})),c["default"].createElement("li",null,c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"ass-choice",checked:n===y.Text,onChange:function(){return S(y.Text)}})," Text"),c["default"].createElement("textarea",{value:p,onChange:function(e){return E(e.target.value.length>0?e.target.value:null)}})))),c["default"].createElement("fieldset",null,c["default"].createElement("legend",null,"Other options"),c["default"].createElement("ul",null,c["default"].createElement("li",null,"Does the M at the end of this question appear red or black? ",c["default"].createElement("span",{style:{color:"black",WebkitFilter:'url("#redtext")',filter:'url("#redtext")'}},"M"),c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"enable-svg",checked:f===!0,onChange:function(){return O(!0)}})," Red"),c["default"].createElement("label",null,c["default"].createElement("input",{type:"radio",name:"enable-svg",checked:f===!1,onChange:function(){return O(!1)}})," Black"),c["default"].createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"0",height:"0"},c["default"].createElement("defs",null,c["default"].createElement("filter",{id:"redtext",x:"-50%",y:"-50%",width:"200%",height:"200%"},c["default"].createElement("feComponentTransfer",{"in":"SourceAlpha"},c["default"].createElement("feFuncR",{type:"linear",slope:"0",intercept:"1"}),c["default"].createElement("feFuncG",{type:"linear",slope:"0",intercept:"0"}),c["default"].createElement("feFuncB",{type:"linear",slope:"0",intercept:"0"}),c["default"].createElement("feFuncA",{type:"linear",slope:"1",intercept:"0"})))))))),c["default"].createElement("button",{type:"button",disabled:!M||!A,onClick:function(){P(t,r,o,i,a,l,n,u,s,p,f)}},"Go"))}function a(e){var t,n=(0,f.makeUniqueActions)(e,{onVideoChoiceChanged:function(e){return{videoChoice:e}},onVideoFileChanged:function(e){return function(t,r){var o=r.videoFile;null!==o&&URL.revokeObjectURL(o),t({type:n.onVideoFileChanged.type,payload:{videoFile:e}})}},onVideoUrlChanged:function(e){return{videoUrl:e}},onVideoDummyResolutionChanged:function(e){return{videoDummyResolution:e}},onVideoDummyColorChanged:function(e){return{videoDummyColor:e}},onVideoDummyDurationChanged:function(e){return{videoDummyDuration:e}},onAssChoiceChanged:function(e){return{assChoice:e}},onAssFileChanged:function(e){return function(t,r){var o=r.assFile;null!==o&&URL.revokeObjectURL(o),t({type:n.onAssFileChanged.type,payload:{assFile:e}})}},onAssUrlChanged:function(e){return{assUrl:e}},onAssTextChanged:function(e){return{assText:e}},onEnableDisableSvg:function(e){return{enableSvg:e}},onSelected:function(e,t,n,r,o,i,a,l,u,s,c){return{videoChoice:e,videoFile:t,videoUrl:n,videoDummyResolution:r,videoDummyColor:o,videoDummyDuration:i,assChoice:a,assFile:l,assUrl:u,assText:s,enableSvg:c}}}),r=(0,p.connect)(e,n)(function(e){return c["default"].createElement(i,e)}),a=(0,f.createReducer)({videoChoice:v.Sample,videoFile:null,videoUrl:null,videoDummyResolution:[1280,720],videoDummyColor:"#2fa3fe",videoDummyDuration:1500,assChoice:y.Text,assFile:null,assUrl:null,assText:d["default"],enableSvg:null},(t={},o(t,n.onVideoChoiceChanged.type,function(e,t){var n=t.videoChoice;return l({},e,{videoChoice:n})}),o(t,n.onVideoFileChanged.type,function(e,t){var n=t.videoFile;return l({},e,{videoFile:n})}),o(t,n.onVideoUrlChanged.type,function(e,t){var n=t.videoUrl;return l({},e,{videoUrl:n})}),o(t,n.onVideoDummyResolutionChanged.type,function(e,t){var n=t.videoDummyResolution;return l({},e,{videoDummyResolution:n})}),o(t,n.onVideoDummyColorChanged.type,function(e,t){var n=t.videoDummyColor;return l({},e,{videoDummyColor:n})}),o(t,n.onVideoDummyDurationChanged.type,function(e,t){var n=t.videoDummyDuration;return l({},e,{videoDummyDuration:n})}),o(t,n.onAssChoiceChanged.type,function(e,t){var n=t.assChoice;return l({},e,{assChoice:n})}),o(t,n.onAssFileChanged.type,function(e,t){var n=t.assFile;return l({},e,{assFile:n})}),o(t,n.onAssUrlChanged.type,function(e,t){var n=t.assUrl;return l({},e,{assUrl:n})}),o(t,n.onAssTextChanged.type,function(e,t){var n=t.assText;return l({},e,{assText:n})}),o(t,n.onEnableDisableSvg.type,function(e,t){var n=t.enableSvg;return l({},e,{enableSvg:n})}),t));return{Actions:n,Options:r,reducer:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.AssChoice=t.VideoChoice=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.connect=a;var u=n(4),s=(r(u),n(1)),c=r(s),p=n(2),f=n(3),h=n(15),d=r(h),v=t.VideoChoice={LocalFile:0,Url:1,Sample:2,Dummy:3},y=t.AssChoice={LocalFile:0,Url:1,Text:2}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=h[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(s(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(s(r.parts[i],t));h[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],l=o[2],u=o[3],s={css:a,media:l,sourceMap:u};n[i]?n[i].parts.push(s):t.push(n[i]={id:i,parts:[s]})}return t}function i(e,t){var n=y(),r=m[m.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),m.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=m.indexOf(e);t>=0&&m.splice(t,1)}function l(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function s(e,t){var n,r,o;if(t.singleton){var i=b++;n=g||(g=l(t)),r=c.bind(null,n,i,!1),o=c.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=f.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),r=p.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function c(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function p(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var h={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=d(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,m=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var l=n[a],u=h[l.id];u.refs--,i.push(u)}if(e){var s=o(e);r(s,t)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=Redux},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.App=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1),l=r(a),u=n(2),s=n(8),c=n(10),p=n(5),f=n(3),h=n(12),d={Options:0,Video:1},v=(0,c.connect)(function(e){var t=e.console;return t}),y=v.Console,g=v.reducer,b=(0,p.connect)(function(e){var t=e.options;return t}),m=b.Actions,w=b.Options,S=b.reducer,C=(0,h.connect)(function(e){var t=e.video,n=e.options,r=n.videoChoice,o=n.videoFile,a=n.videoUrl,l=n.videoDummyResolution,u=n.videoDummyColor,s=n.videoDummyDuration,c=n.assChoice,p=n.assFile,f=n.assUrl,h=n.assText,d=n.enableSvg;return i({},t,{videoChoice:r,videoFile:o,videoUrl:a,videoDummyResolution:l,videoDummyColor:u,videoDummyDuration:s,assChoice:c,assFile:p,assUrl:f,assText:h,enableSvg:d})}),_=C.Video,E=C.reducer,O=(t.App=(0,u.connect)(function(e){var t=e.app;return t},{})(function(e){var t=e.currentScreen;return l["default"].createElement("div",null,l["default"].createElement("p",null,"This is a version of ",l["default"].createElement("a",{href:"https://github.com/Arnavion/libjass"},"libjass's")," online ",l["default"].createElement("a",{href:"https://arnavion.github.io/libjass/demo/"},"demo")," made using ",l["default"].createElement("a",{href:"https://facebook.github.io/react/"},"React.")),function(){switch(t){case d.Options:return l["default"].createElement(w,null);case d.Video:return l["default"].createElement(_,null)}}(),l["default"].createElement(y,null),l["default"].createElement("div",null,"Found a bug? Please check if there's already a similar issue already reported at ",l["default"].createElement("a",{href:"https://github.com/Arnavion/libjass/issues"},"https://github.com/Arnavion/libjass/issues")," If there isn't, please open a new issue. You can also report it in the #libjass channel on the Rizon IRC network."),l["default"].createElement("div",null,"Please include the following information in your bug report:",l["default"].createElement("ul",null,l["default"].createElement("li",null,'Your OS and browser versions. Eg: "Chrome 49 on Windows 7"'),l["default"].createElement("li",null,'A description of the bug. What did you expect to see? What happened instead? Eg: "All the subtitles are visible except the one at 00:00:05 \'Was it you who broke the clock?\'" or "The subtitle at 00:00:05 should be red but instead it\'s blue."'),l["default"].createElement("li",null,"If possible, a URL to the video and script that I can access for testing."),l["default"].createElement("li",null,'Any text from the "Console output" section above.'))));
}),(0,f.createReducer)({currentScreen:d.Options},o({},m.onSelected.type,function(e){return i({},e,{currentScreen:d.Video})})));t.reducer=(0,s.combineReducers)({app:O,console:g,options:S,video:E})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.entries,n=e.debugMode,r=e.verboseMode,o=e.onEnableDisableDebugMode,i=e.onEnableDisableVerboseMode,a=e.onClear;return v["default"].debugMode=n,v["default"].verboseMode=r,g["default"].createElement("fieldset",{className:"console"},g["default"].createElement("legend",null,"Console output",g["default"].createElement("label",null,g["default"].createElement("input",{type:"checkbox",checked:n,onChange:function(e){return o(e.target.checked)}})," Enable debug mode"),g["default"].createElement("label",null,g["default"].createElement("input",{type:"checkbox",checked:r,onChange:function(e){return i(e.target.checked)}})," Enable verbose mode"),g["default"].createElement("button",{type:"button",onClick:a},"Clear")),t.map(function(e){var t=e.id,n=e.type,r=e.text;return g["default"].createElement("div",{key:t,className:n},r)}))}function c(e){var t,n=(0,m.makeUniqueActions)(e,{onMount:function(){return function(e){var t=console.log.bind(console);console.log=function(){for(var r=arguments.length,o=Array(r),i=0;r>i;i++)o[i]=arguments[i];t.apply(void 0,o),e(n.onAdd("log",o))};var r=console.warn.bind(console);console.warn=function(){for(var t=arguments.length,o=Array(t),i=0;t>i;i++)o[i]=arguments[i];r.apply(void 0,o),e(n.onAdd("warning",o))};var o=console.error.bind(console);console.error=function(){for(var t=arguments.length,r=Array(t),i=0;t>i;i++)r[i]=arguments[i];o.apply(void 0,r),e(n.onAdd("error",r))}}},onAdd:function(e,t){var n=!1,r=t.reduce(function(e,t){switch("undefined"==typeof t?"undefined":h(t)){case"boolean":case"number":case"string":break;default:n=!0}return e+" "+t},(new Date).toString()+":");return{type:e,text:n?r+" [Check browser console for more details.]":r}},onEnableDisableDebugMode:function(e){return function(t){console.log((e?"Enabling":"Disabling")+" debug mode."),t({type:n.onEnableDisableDebugMode.type,payload:{debugMode:e}})}},onEnableDisableVerboseMode:function(e){return function(t){console.log((e?"Enabling":"Disabling")+" verbose mode."),t({type:n.onEnableDisableVerboseMode.type,payload:{verboseMode:e}})}},onClear:function(){}}),r=(0,b.connect)(e,n)(function(e){function t(){return a(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.entries,n=e.debugMode,r=e.verboseMode,o=e.onEnableDisableDebugMode,i=e.onEnableDisableVerboseMode,a=e.onClear;return g["default"].createElement(s,{entries:t,debugMode:n,verboseMode:r,onEnableDisableDebugMode:o,onEnableDisableVerboseMode:i,onClear:a})}},{key:"componentDidMount",value:function(){this.props.onMount()}}]),t}(y.Component)),c=(0,m.createReducer)({entries:[],lastItemId:0,debugMode:!1,verboseMode:!1},(t={},o(t,n.onAdd.type,function(e,t){var n=t.type,r=t.text;return p({},e,{entries:[].concat(i(e.entries),[{id:e.lastItemId,type:n,text:r}]),lastItemId:e.lastItemId+1})}),o(t,n.onEnableDisableDebugMode.type,function(e,t){var n=t.debugMode;return p({},e,{debugMode:n})}),o(t,n.onEnableDisableVerboseMode.type,function(e,t){var n=t.verboseMode;return p({},e,{verboseMode:n})}),o(t,n.onClear.type,function(e){return p({},e,{entries:[]})}),t));return{Actions:n,Console:r,reducer:c}}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.connect=c;var d=n(4),v=r(d),y=n(1),g=r(y),b=n(2),m=n(3)},function(e,t){"use strict";function n(e,t,n,s,c){return new Promise(function(a,c){e.width=t,e.height=n;var p=document.createElement("canvas");p.width=t,p.height=n;var f=p.getContext("2d");f.fillStyle=s,f.fillRect(0,0,t,n);var h=p.captureStream(0),d=new MediaRecorder(h);d.start(1);var v=null;d.addEventListener("dataavailable",function(t){if("inactive"!==d.state){if(0===t.data.size)return void console.warn("No new data.");if(d.pause(),null===v){if(v=t.data,!MediaSource.isTypeSupported(v.type))return d.stop(),void c(new Error("MediaRecorder is recording video in "+v.type+" but MediaSource doesn't support it. Make sure media.mediasource.webm.enabled is on in about:config"))}else v=new Blob([v,t.data],{type:v.type});Promise.all([r(e,v.type),o(v)]).then(function(e){var t=u(e,2),n=u(t[0],2),r=n[0],o=n[1],a=t[1];return i(o,a).then(function(){return console.log("Got enough data for "+l(o)+" seconds."),[r,o,a]})}).then(function(e){a(e),d.stop()},function(e){console.warn(e),console.warn("Waiting for more data..."),d.resume()})}},!1)}).then(function(e){var t=u(e,3),n=t[0],r=t[1],o=t[2];return a(r,o,c).then(function(){return n.endOfStream()})})}function r(e,t){return new Promise(function(n,r){var o=new MediaSource;o.addEventListener("sourceopen",function i(){o.removeEventListener("sourceopen",i,!1);try{var e=o.addSourceBuffer(t);n([o,e])}catch(a){r(a)}},!1),e.src=URL.createObjectURL(o)})}function o(e){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("load",function(){t(r.result)},!1),r.addEventListener("error",n,!1),r.readAsArrayBuffer(e)})}function i(e,t){return new Promise(function(n,r){var o=l(e);e.addEventListener("updateend",function i(){if(e.removeEventListener("updateend",i,!1),0===e.buffered.length)return void r(new Error("buffer of length "+t.byteLength+" could not be appended to sourceBuffer. It's probably too small and doesn't contain any frames."));var a=l(e);return a===o?void r(new Error("sourceBuffer is not increasing in size. Perhaps buffer is too small?")):void n()},!1),e.timestampOffset=o,e.appendBuffer(t)})}function a(e,t,n){var r=l(e);return n>r?i(e,t).then(function(){return a(e,t,n)}):Promise.resolve()}function l(e){return 0===e.buffered.length?0:e.buffered.end(0)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.makeDummyVideo=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t,n=(0,S.makeUniqueActions)(e,{onMount:function(e,t){return function(r,o){var i=o.videoChoice,a=o.videoDummyResolution,l=o.videoDummyColor,u=o.videoDummyDuration,s=o.assChoice,p=o.assFile,h=o.assUrl,d=o.assText,y=o.enableSvg,g=function(){switch(i){case w.VideoChoice.LocalFile:case w.VideoChoice.Url:case w.VideoChoice.Sample:return c(e);case w.VideoChoice.Dummy:var t=f(a,2),n=t[0],r=t[1];return(0,m.makeDummyVideo)(e,n,r,l,u)}}().then(function(){console.log("Video metadata loaded."),r(n.onVideoMetadataLoaded([e.videoWidth,e.videoHeight]))})["catch"](function(e){var t=void 0!==e.code?[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][e.code]:"";throw console.error("Video could not be loaded: %o %o",t,e),e}),b=function(){switch(s){case w.AssChoice.LocalFile:return v["default"].ASS.fromUrl(p);case w.AssChoice.Url:return v["default"].ASS.fromUrl(h);case w.AssChoice.Text:return v["default"].ASS.fromString(d)}}().then(function(e){return console.log("Script received."),window.ass=e,r(n.onScriptLoaded([e.properties.resolutionX,e.properties.resolutionY])),e})["catch"](function(e){throw console.error("ASS could not be loaded: %o",e),e});Promise.all([g,b]).then(function(o){var i=f(o,2),a=i[1],l={};null!==y&&(l.enableSvg=y);var u=new v["default"].renderers.WebRenderer(a,new v["default"].renderers.VideoClock(e),t,l);window.renderer=u,u.addEventListener("ready",function(){console.log("Beginning autoplay."),e.play()}),r(n.onRendererCreated(u))})}},onChangeToVideoResolution:function(){},onChangeToScriptResolution:function(){},onEnableDisableSubs:function(e){return{subsEnabled:e}},onVideoMetadataLoaded:function(e){return{videoResolution:e}},onScriptLoaded:function(e){return{assResolution:e}},onRendererCreated:function(e){return{renderer:e}}}),r=(0,b.connect)(e,n)(function(e){var t=e.videoResolution,n=e.assResolution,r=e.currentResolution,o=e.subsEnabled,i=e.renderer,a=e.videoChoice,l=e.videoFile,u=e.videoUrl,s=e.onMount,c=e.onChangeToVideoResolution,p=e.onChangeToScriptResolution,f=e.onEnableDisableSubs;return g["default"].createElement(C,{videoResolution:t,assResolution:n,currentResolution:r,subsEnabled:o,renderer:i,videoChoice:a,videoFile:l,videoUrl:u,onMount:s,onChangeToVideoResolution:c,onChangeToScriptResolution:p,onEnableDisableSubs:f})}),a=(0,S.createReducer)({videoResolution:null,assResolution:null,currentResolution:null,subsEnabled:!0,renderer:null},(t={},o(t,n.onChangeToVideoResolution.type,function(e){return p({},e,{currentResolution:[].concat(i(e.videoResolution))})}),o(t,n.onChangeToScriptResolution.type,function(e){return p({},e,{currentResolution:[].concat(i(e.assResolution))})}),o(t,n.onEnableDisableSubs.type,function(e,t){var n=t.subsEnabled;return p({},e,{subsEnabled:n})}),o(t,n.onVideoMetadataLoaded.type,function(e,t){var n=t.videoResolution;return p({},e,{videoResolution:n,currentResolution:[].concat(i(n))})}),o(t,n.onScriptLoaded.type,function(e,t){var n=t.assResolution;return p({},e,{assResolution:n})}),o(t,n.onRendererCreated.type,function(e,t){var n=t.renderer;return p({},e,{renderer:n})}),t));return{Actions:n,Video:r,reducer:a}}function c(e){return new Promise(function(t,n){e.readyState<HTMLMediaElement.HAVE_METADATA?(e.addEventListener("loadedmetadata",t,!1),e.addEventListener("error",function(){return n(e.error)},!1)):t()})}Object.defineProperty(t,"__esModule",{value:!0});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.connect=s;var d=n(4),v=r(d),y=n(1),g=r(y),b=n(2),m=n(11),w=n(5),S=n(3),C=function(e){function t(){return a(this,t),l(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=e.videoResolution,n=e.assResolution,r=e.currentResolution,o=e.subsEnabled,a=e.renderer,l=e.videoChoice,u=e.videoFile,s=e.videoUrl,c=e.onChangeToVideoResolution,p=e.onChangeToScriptResolution,f=e.onEnableDisableSubs;return null!==a&&(a.setEnabled(o),a.resize.apply(a,i(r))),g["default"].createElement("div",null,g["default"].createElement("div",{ref:"subsWrapper"},g["default"].createElement("video",{controls:!0,ref:"video",width:null!==r?r[0]:"",height:null!==r?r[1]:"",src:function(){switch(l){case w.VideoChoice.LocalFile:return u;case w.VideoChoice.Url:return s}}()},l===w.VideoChoice.Sample?[g["default"].createElement("source",{key:0,type:"video/webm",src:"sample.webm"}),g["default"].createElement("source",{key:1,type:"video/mp4",src:"sample.mp4"})]:[])),g["default"].createElement("form",{className:"settings-form"},g["default"].createElement("fieldset",null,g["default"].createElement("legend",null,"Video size"),g["default"].createElement("div",null,g["default"].createElement("label",null,g["default"].createElement("input",{type:"radio",name:"video-size",defaultChecked:!0,onChange:c})," Video resolution ",null!==t?t[0]:"","x",null!==t?t[1]:""),g["default"].createElement("label",null,g["default"].createElement("input",{type:"radio",name:"video-size",onChange:p})," Script resolution ",null!==n?n[0]:"","x",null!==n?n[1]:""))),g["default"].createElement("fieldset",null,g["default"].createElement("legend",null,"Subtitles"),g["default"].createElement("label",null,g["default"].createElement("input",{type:"checkbox",checked:o,onChange:function(e){return f(e.target.checked)}}),"Subtitles"))))}},{key:"componentDidMount",value:function(){this.props.onMount(this.refs.video,this.refs.subsWrapper)}}]),t}(y.Component)},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,".libjass-wrapper{position:relative;overflow:hidden}.libjass-subs{position:absolute;overflow:hidden}.libjass-subs,.libjass-subs *{pointer-events:none;-webkit-animation-fill-mode:both!important;animation-fill-mode:both!important}.libjass-subs.paused *{-webkit-animation-play-state:paused!important;animation-play-state:paused!important}.libjass-subs .an{position:absolute}.libjass-subs .an1,.libjass-subs .an2,.libjass-subs .an3{bottom:0}.libjass-subs .an4,.libjass-subs .an5,.libjass-subs .an6{display:table;width:100%;height:100%}.libjass-subs .an4>*,.libjass-subs .an5>*,.libjass-subs .an6>*{display:table-cell;vertical-align:middle}.libjass-subs .an7,.libjass-subs .an8,.libjass-subs .an9{top:0}.libjass-subs .an1,.libjass-subs .an4,.libjass-subs .an7{text-align:left}.libjass-subs .an2,.libjass-subs .an5,.libjass-subs .an8{text-align:center}.libjass-subs .an3,.libjass-subs .an6,.libjass-subs .an9{text-align:right}.libjass-subs{line-height:0}.libjass-subs div[data-dialogue-id]>span{-webkit-perspective-origin:50%;-webkit-perspective:400px;perspective-origin:50%;perspective:400px}.libjass-font-measure{position:absolute;visibility:hidden;border:0;margin:0;padding:0;line-height:normal}.libjass-filters{display:block}",""])},function(e,t,n){t=e.exports=n(6)(),t.push([e.id,"body{margin:0;padding:10px;box-sizing:border-box}.settings-form>fieldset{display:inline-block}.console>.warning{color:orange}.console>.error{color:red}ul.choices-list{list-style-type:none;padding-left:0}",""])},function(e,t){e.exports="[Script Info]\n; Script generated by Aegisub 2.1.8\n; http://www.aegisub.org/\nTitle:   Default Aegisub file\nScriptType: v4.00+\nWrapStyle:   0\nPlayResX:   1280\nPlayResY:   720\nScaledBorderAndShadow:   yes\nCollisions:   Normal\nVideo Aspect Ratio: 0\nVideo Zoom: 6\nVideo Position: 0\n\n[V4+ Styles]\nFormat: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\nStyle: Default,Arial,50,&H00F1F4F9,&H000000FF,&H000F1115,&H96000000,0,0,0,0,100,100,0,0,1,1.5,0,2,80,80,35,1\n\n[Events]\nFormat: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text\nDialogue: 0,0:00:00.00,0:01:15.00,Default,,0000,0000,0000,,{\\an8}This is a sample ASS file\\Nthat showcases some of libjass's capabilities.\nDialogue: 0,0:00:05.00,0:00:10.00,Default,,0000,0000,0000,,{\\c&H0000FF&}Red text with \\c\nDialogue: 0,0:00:10.00,0:00:15.00,Default,,0000,0000,0000,,{\\c&H0000FF&\\3c&H00FF00&}Red text with green outline with \\c and \\3c\nDialogue: 0,0:00:15.00,0:00:20.00,Default,,0000,0000,0000,,{\\alpha&H80&}Translucent text with \\alpha\nDialogue: 0,0:00:20.00,0:00:25.00,Default,,0000,0000,0000,,{\\fad(2000,2000)}Fade-in and out text with \\fad\nDialogue: 0,0:00:25.00,0:00:30.00,Default,,0000,0000,0000,,{\\move(0,0,1280,720)}Moving text with \\mov\nDialogue: 0,0:00:30.00,0:00:35.00,Default,,0000,0000,0000,,{\\pos(640,360)}Positioned text with \\pos\nDialogue: 0,0:00:35.00,0:00:40.00,Default,,0000,0000,0000,,{\\i1}Italic,{\\i} {\\u1}underlined{\\u} and {\\s1}strikeout{\\s} text with \\i, \\u and \\s\nDialogue: 0,0:00:40.00,0:00:45.00,Default,,0000,0000,0000,,{\\bord10}Borders with \\bord\nDialogue: 0,0:00:45.00,0:00:50.00,Default,,0000,0000,0000,,{\\shad10}Shadows with \\shad\nDialogue: 0,0:00:50.00,0:00:55.00,Default,,0000,0000,0000,,{\\fs20}Tiny text{\\fs} and {\\fs100}large text{\\fs} with \\fs\nDialogue: 0,0:00:55.00,0:01:00.00,Default,,0000,0000,0000,,{\\fscx200}Wide text{\\fscx} and {\\fscy200}tall text{\\fscy} with \\fscx and \\fscy\nDialogue: 0,0:01:00.00,0:01:05.00,Default,,0000,0000,0000,,{\\pos(640,360)\\frz60}Rotated text with \\frz\nDialogue: 0,0:01:05.00,0:01:10.00,Default,,0000,0000,0000,,{\\pos(640,360)\\t(\\frz720)}You spin me right round baby right round\nDialogue: 0,0:01:05.00,0:01:10.00,Default,,0000,0000,0000,,Spinning text with \\t and \\frz\nDialogue: 0,0:01:10.00,0:01:15.00,Default,,0000,0000,0000,,The End"},function(e,t,n){var r=n(13);"string"==typeof r&&(r=[[e.id,r,""]]);n(7)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(14);"string"==typeof r&&(r=[[e.id,r,""]]);n(7)(r,{});r.locals&&(e.exports=r.locals)},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=ReduxThunk}]);